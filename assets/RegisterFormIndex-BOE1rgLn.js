import{q as Be,t as $e,r as N,v as ke,w as Dt,j as T,s as ee,x as Se,z as je,C as fi,E as pi,H as Wn,J as rt,K as hi,Q as qe,R as mi,U as Yn,W as ss,X as Ei,k as gi,S as Ii,Y as _i,Z as cn,_ as Yt,$ as Ti,a0 as is,a as Ft,b as On,y as Dn,e as os,B as Q,i as un,A as yi,T as Ri,a1 as vn,a2 as Si,a3 as Xn,a4 as bi,a5 as Oi,a6 as Di,a7 as vi,a8 as Ai,g as wi,a9 as xi,m as Ci,D as Mi,aa as Li,ab as Pi,ac as Ni,P as Fi,M as Gi}from"./index-DoAxHfkR.js";import{G as An}from"./GlobalForm-C-E8Glxm.js";import{g as Ui}from"./course-Dt0OYzYm.js";function Vi(e){return Be("MuiListItem",e)}$e("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Bi(e){return Be("MuiListItemSecondaryAction",e)}$e("MuiListItemSecondaryAction",["root","disableGutters"]);const $i=e=>{const{disableGutters:t,classes:n}=e;return je({root:["root",t&&"disableGutters"]},Bi,n)},ki=ee("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),as=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiListItemSecondaryAction"}),{className:s,...o}=r,i=N.useContext(Dt),l={...r,disableGutters:i.disableGutters},a=$i(l);return T.jsx(ki,{className:Se(a.root,s),ownerState:l,ref:n,...o})});as.muiName="ListItemSecondaryAction";const ji=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},qi=e=>{const{alignItems:t,classes:n,dense:r,disableGutters:s,disablePadding:o,divider:i,hasSecondaryAction:l}=e;return je({root:["root",r&&"dense",!s&&"gutters",!o&&"padding",i&&"divider",t==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},Vi,n)},zi=ee("div",{name:"MuiListItem",slot:"Root",overridesResolver:ji})(rt(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${hi.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Hi=ee("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Wi=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiListItem"}),{alignItems:s="center",children:o,className:i,component:l,components:a={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:d,...h}={},dense:m=!1,disableGutters:p=!1,disablePadding:I=!1,divider:_=!1,secondaryAction:E,slotProps:f={},slots:g={},...R}=r,y=N.useContext(Dt),S=N.useMemo(()=>({dense:m||y.dense||!1,alignItems:s,disableGutters:p}),[s,y.dense,m,p]),M=N.useRef(null),b=N.Children.toArray(o),w=b.length&&fi(b[b.length-1],["ListItemSecondaryAction"]),L={...r,alignItems:s,dense:S.dense,disableGutters:p,disablePadding:I,divider:_,hasSecondaryAction:w},v=qi(L),C=pi(M,n),V=g.root||a.Root||zi,A=f.root||u.root||{},B={className:Se(v.root,A.className,i),...R};let O=l||"li";return w?(O=!B.component&&!l?"div":O,c==="li"&&(O==="li"?O="div":B.component==="li"&&(B.component="div")),T.jsx(Dt.Provider,{value:S,children:T.jsxs(Hi,{as:c,className:Se(v.container,d),ref:C,ownerState:L,...h,children:[T.jsx(V,{...A,...!Wn(V)&&{as:O,ownerState:{...L,...A.ownerState}},...B,children:b}),b.pop()]})})):T.jsx(Dt.Provider,{value:S,children:T.jsxs(V,{...A,as:O,ref:C,...!Wn(V)&&{ownerState:{...L,...A.ownerState}},...B,children:[b,E&&T.jsx(as,{children:E})]})})}),Gt=N.createContext({}),wn=N.createContext({});function Yi(e){return Be("MuiStep",e)}$e("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Xi=e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:s}=e;return je({root:["root",n,r&&"alternativeLabel",s&&"completed"]},Yi,t)},Zi=ee("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Qi=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiStep"}),{active:s,children:o,className:i,component:l="div",completed:a,disabled:u,expanded:c=!1,index:d,last:h,...m}=r,{activeStep:p,connector:I,alternativeLabel:_,orientation:E,nonLinear:f}=N.useContext(Gt);let[g=!1,R=!1,y=!1]=[s,a,u];p===d?g=s!==void 0?s:!0:!f&&p>d?R=a!==void 0?a:!0:!f&&p<d&&(y=u!==void 0?u:!0);const S=N.useMemo(()=>({index:d,last:h,expanded:c,icon:d+1,active:g,completed:R,disabled:y}),[d,h,c,g,R,y]),M={...r,active:g,orientation:E,alternativeLabel:_,completed:R,disabled:y,expanded:c,component:l},b=Xi(M),w=T.jsxs(Zi,{as:l,className:Se(b.root,i),ref:n,ownerState:M,...m,children:[I&&_&&d!==0?I:null,o]});return T.jsx(wn.Provider,{value:S,children:I&&!_&&d!==0?T.jsxs(N.Fragment,{children:[I,w]}):w})}),Ki=qe(T.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ji=qe(T.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function eo(e){return Be("MuiStepIcon",e)}const Xt=$e("MuiStepIcon",["root","active","completed","error","text"]);var Zn;const to=e=>{const{classes:t,active:n,completed:r,error:s}=e;return je({root:["root",n&&"active",r&&"completed",s&&"error"],text:["text"]},eo,t)},Zt=ee(mi,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(rt(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${Xt.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${Xt.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${Xt.error}`]:{color:(e.vars||e).palette.error.main}}))),no=ee("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(rt(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),ro=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiStepIcon"}),{active:s=!1,className:o,completed:i=!1,error:l=!1,icon:a,...u}=r,c={...r,active:s,completed:i,error:l},d=to(c);if(typeof a=="number"||typeof a=="string"){const h=Se(o,d.root);return l?T.jsx(Zt,{as:Ji,className:h,ref:n,ownerState:c,...u}):i?T.jsx(Zt,{as:Ki,className:h,ref:n,ownerState:c,...u}):T.jsxs(Zt,{className:h,ref:n,ownerState:c,...u,children:[Zn||(Zn=T.jsx("circle",{cx:"12",cy:"12",r:"12"})),T.jsx(no,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:a})]})}return a});function so(e){return Be("MuiStepLabel",e)}const ve=$e("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),io=e=>{const{classes:t,orientation:n,active:r,completed:s,error:o,disabled:i,alternativeLabel:l}=e;return je({root:["root",n,o&&"error",i&&"disabled",l&&"alternativeLabel"],label:["label",r&&"active",s&&"completed",o&&"error",i&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",s&&"completed",o&&"error",i&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]},so,t)},oo=ee("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})({display:"flex",alignItems:"center",[`&.${ve.alternativeLabel}`]:{flexDirection:"column"},[`&.${ve.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),ao=ee("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(rt(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${ve.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ve.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ve.alternativeLabel}`]:{marginTop:16},[`&.${ve.error}`]:{color:(e.vars||e).palette.error.main}}))),lo=ee("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${ve.alternativeLabel}`]:{paddingRight:0}}),co=ee("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(rt(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${ve.alternativeLabel}`]:{textAlign:"center"}}))),dn=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiStepLabel"}),{children:s,className:o,componentsProps:i={},error:l=!1,icon:a,optional:u,slots:c={},slotProps:d={},StepIconComponent:h,StepIconProps:m,...p}=r,{alternativeLabel:I,orientation:_}=N.useContext(Gt),{active:E,disabled:f,completed:g,icon:R}=N.useContext(wn),y=a||R;let S=h;y&&!S&&(S=ro);const M={...r,active:E,alternativeLabel:I,completed:g,disabled:f,error:l,orientation:_},b=io(M),w={slots:c,slotProps:{stepIcon:m,...i,...d}},[L,v]=Yn("label",{elementType:ao,externalForwardedProps:w,ownerState:M}),[C,V]=Yn("stepIcon",{elementType:S,externalForwardedProps:w,ownerState:M});return T.jsxs(oo,{className:Se(b.root,o),ref:n,ownerState:M,...p,children:[y||C?T.jsx(lo,{className:b.iconContainer,ownerState:M,children:T.jsx(C,{completed:g,active:E,error:l,icon:y,...V})}):null,T.jsxs(co,{className:b.labelContainer,ownerState:M,children:[s?T.jsx(L,{...v,className:Se(b.label,v==null?void 0:v.className),children:s}):null,u]})]})});dn&&(dn.muiName="StepLabel");function uo(e){return Be("MuiStepConnector",e)}const Xe=$e("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),fo=e=>{const{classes:t,orientation:n,alternativeLabel:r,active:s,completed:o,disabled:i}=e,l={root:["root",n,r&&"alternativeLabel",s&&"active",o&&"completed",i&&"disabled"],line:["line",`line${ss(n)}`]};return je(l,uo,t)},po=ee("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),ho=ee("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${ss(n.orientation)}`]]}})(rt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),ls=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiStepConnector"}),{className:s,...o}=r,{alternativeLabel:i,orientation:l="horizontal"}=N.useContext(Gt),{active:a,disabled:u,completed:c}=N.useContext(wn),d={...r,alternativeLabel:i,orientation:l,active:a,completed:c,disabled:u},h=fo(d);return T.jsx(po,{className:Se(h.root,s),ref:n,ownerState:d,...o,children:T.jsx(ho,{className:h.line,ownerState:d})})});function mo(e){return Be("MuiStepper",e)}$e("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Eo=e=>{const{orientation:t,nonLinear:n,alternativeLabel:r,classes:s}=e;return je({root:["root",t,n&&"nonLinear",r&&"alternativeLabel"]},mo,s)},go=ee("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Io=T.jsx(ls,{}),_o=N.forwardRef(function(t,n){const r=ke({props:t,name:"MuiStepper"}),{activeStep:s=0,alternativeLabel:o=!1,children:i,className:l,component:a="div",connector:u=Io,nonLinear:c=!1,orientation:d="horizontal",...h}=r,m={...r,nonLinear:c,alternativeLabel:o,orientation:d,component:a},p=Eo(m),I=N.Children.toArray(i).filter(Boolean),_=I.map((f,g)=>N.cloneElement(f,{index:g,last:g+1===I.length,...f.props})),E=N.useMemo(()=>({activeStep:s,alternativeLabel:o,connector:u,nonLinear:c,orientation:d}),[s,o,u,c,d]);return T.jsx(Gt.Provider,{value:E,children:T.jsx(go,{as:a,ownerState:m,className:Se(p.root,l),ref:n,...h,children:_})})}),To=qe(T.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),yo=qe(T.jsx("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAdd"),Ro=qe(T.jsx("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 13H3V5h18z"}),"VideoLabel"),cs=N.createContext(null),st=()=>N.useContext(cs),So=N.memo(({header:e,footer:t,children:n,onStepChange:r,wrapper:s,startIndex:o=0})=>{const[i,l]=N.useState(o),[a,u]=N.useState(!1),c=N.useRef(!0),d=N.useRef(!1),h=N.useRef(()=>{}),m=N.Children.toArray(n).length;c.current=i<m-1,d.current=i>0;const p=N.useCallback(()=>{if(c.current){const S=i+1;l(S),r==null||r(S)}},[i,r]),I=N.useCallback(()=>{if(d.current){h.current=null;const S=i-1;l(S),r==null||r(S)}},[i,r]),_=N.useCallback(S=>{S>=0&&S<m&&(h.current=null,l(S),r==null||r(S))},[m,r]),E=N.useRef(S=>{h.current=S}),f=N.useCallback(async()=>{if(c.current&&h.current)try{u(!0),await h.current(),u(!1),h.current=null,p()}catch(S){throw u(!1),S}else p()},[p]),g=N.useMemo(()=>({nextStep:f,previousStep:I,handleStep:E.current,isLoading:a,activeStep:i,stepCount:m,isFirstStep:!d.current,isLastStep:!c.current,goToStep:_}),[f,I,a,i,m,_]),R=N.useMemo(()=>N.Children.toArray(n)[i],[i,n,e,t]),y=N.useMemo(()=>s?N.cloneElement(s,{children:R}):R,[s,R]);return N.createElement(cs.Provider,{value:g},e,y,t)}),bo=ee(ls)(({theme:e})=>({[`&.${Xe.alternativeLabel}`]:{top:22},[`&.${Xe.active}`]:{[`& .${Xe.line}`]:{backgroundImage:"linear-gradient(95deg, #a084e8 0%, #8e7cc3 50%, #7b68ee 100%)"}},[`&.${Xe.completed}`]:{[`& .${Xe.line}`]:{backgroundImage:"linear-gradient(95deg, #a084e8 0%, #8e7cc3 50%, #7b68ee 100%)"}},[`& .${Xe.line}`]:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})),Oo=ee("div")(({theme:e,ownerState:t})=>({backgroundColor:"#ccc",zIndex:1,color:"#fff",width:40,height:40,display:"flex",borderRadius:8,justifyContent:"center",alignItems:"center",fontSize:20,...t.active&&{backgroundImage:"secondary",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},...t.completed&&{backgroundImage:"linear-gradient(136deg, #a084e8 0%, #8e7cc3 50%, #7b68ee 100%)"}}));function Do(e){const{active:t,completed:n,icon:r}=e,s={1:T.jsx(To,{}),2:T.jsx(yo,{}),3:T.jsx(Ro,{})};return T.jsx(Oo,{ownerState:{completed:n,active:t},children:s[r]})}const vo=()=>{const{activeStep:e,goToStep:t}=st(),n=Ei(),r=gi(n.breakpoints.down("sm")),s=["Informacion del niño","Aula","Información Acudiente","Cargue de documentos"],o=i=>{i<=e&&t(i)};return T.jsx(Ii,{sx:{width:"100%",mb:3},spacing:4,children:T.jsx(_o,{activeStep:e+1,orientation:r?"vertical":"horizontal",alternativeLabel:!r,connector:T.jsx(bo,{}),children:s.map((i,l)=>T.jsx(Qi,{children:T.jsx(dn,{StepIconComponent:Do,onClick:()=>o(l),sx:{cursor:l+1<=e?"pointer":"default","& .MuiStepLabel-label":{fontSize:r?"0.875rem":"1rem",fontWeight:e===l?"bold":"normal",color:"gray"}},children:i})},i))})})};var Qt,Qn;function Ao(){if(Qn)return Qt;Qn=1;function e(E){this._maxSize=E,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(E){return this._values[E]},e.prototype.set=function(E,f){return this._size>=this._maxSize&&this.clear(),E in this._values||this._size++,this._values[E]=f};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,i=512,l=new e(i),a=new e(i),u=new e(i);Qt={Cache:e,split:d,normalizePath:c,setter:function(E){var f=c(E);return a.get(E)||a.set(E,function(R,y){for(var S=0,M=f.length,b=R;S<M-1;){var w=f[S];if(w==="__proto__"||w==="constructor"||w==="prototype")return R;b=b[f[S++]]}b[f[S]]=y})},getter:function(E,f){var g=c(E);return u.get(E)||u.set(E,function(y){for(var S=0,M=g.length;S<M;)if(y!=null||!f)y=y[g[S++]];else return;return y})},join:function(E){return E.reduce(function(f,g){return f+(m(g)||n.test(g)?"["+g+"]":(f?".":"")+g)},"")},forEach:function(E,f,g){h(Array.isArray(E)?E:d(E),f,g)}};function c(E){return l.get(E)||l.set(E,d(E).map(function(f){return f.replace(o,"$2")}))}function d(E){return E.match(t)||[""]}function h(E,f,g){var R=E.length,y,S,M,b;for(S=0;S<R;S++)y=E[S],y&&(_(y)&&(y='"'+y+'"'),b=m(y),M=!b&&/^\d+$/.test(y),f.call(g,y,b,M,S,E))}function m(E){return typeof E=="string"&&E&&["'",'"'].indexOf(E.charAt(0))!==-1}function p(E){return E.match(r)&&!E.match(n)}function I(E){return s.test(E)}function _(E){return!m(E)&&(p(E)||I(E))}return Qt}var Ne=Ao(),Kt,Kn;function wo(){if(Kn)return Kt;Kn=1;const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=c=>c.match(e)||[],n=c=>c[0].toUpperCase()+c.slice(1),r=(c,d)=>t(c).join(d).toLowerCase(),s=c=>t(c).reduce((d,h)=>`${d}${d?h[0].toUpperCase()+h.slice(1).toLowerCase():h.toLowerCase()}`,"");return Kt={words:t,upperFirst:n,camelCase:s,pascalCase:c=>n(s(c)),snakeCase:c=>r(c,"_"),kebabCase:c=>r(c,"-"),sentenceCase:c=>n(r(c," ")),titleCase:c=>t(c).map(n).join(" ")},Kt}var Jt=wo(),Et={exports:{}},Jn;function xo(){if(Jn)return Et.exports;Jn=1,Et.exports=function(s){return e(t(s),s)},Et.exports.array=e;function e(s,o){var i=s.length,l=new Array(i),a={},u=i,c=n(o),d=r(s);for(o.forEach(function(m){if(!d.has(m[0])||!d.has(m[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});u--;)a[u]||h(s[u],u,new Set);return l;function h(m,p,I){if(I.has(m)){var _;try{_=", node was:"+JSON.stringify(m)}catch{_=""}throw new Error("Cyclic dependency"+_)}if(!d.has(m))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(m));if(!a[p]){a[p]=!0;var E=c.get(m)||new Set;if(E=Array.from(E),p=E.length){I.add(m);do{var f=E[--p];h(f,d.get(f),I)}while(p);I.delete(m)}l[--i]=m}}}function t(s){for(var o=new Set,i=0,l=s.length;i<l;i++){var a=s[i];o.add(a[0]),o.add(a[1])}return Array.from(o)}function n(s){for(var o=new Map,i=0,l=s.length;i<l;i++){var a=s[i];o.has(a[0])||o.set(a[0],new Set),o.has(a[1])||o.set(a[1],new Set),o.get(a[0]).add(a[1])}return o}function r(s){for(var o=new Map,i=0,l=s.length;i<l;i++)o.set(s[i],i);return o}return Et.exports}var Co=xo();const Mo=_i(Co),Lo=Object.prototype.toString,Po=Error.prototype.toString,No=RegExp.prototype.toString,Fo=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Go=/^Symbol\((.*)\)(.*)$/;function Uo(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function er(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return Uo(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return Fo.call(e).replace(Go,"Symbol($1)");const r=Lo.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+Po.call(e)+"]":r==="RegExp"?No.call(e):null}function Ae(e,t){let n=er(e,t);return n!==null?n:JSON.stringify(e,function(r,s){let o=er(this[r],t);return o!==null?o:s},2)}function us(e){return e==null?[]:[].concat(e)}let ds,fs,ps,Vo=/\$\{\s*(\w+)\s*\}/g;ds=Symbol.toStringTag;class tr{constructor(t,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[ds]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],us(t).forEach(o=>{if(oe.isError(o)){this.errors.push(...o.errors);const i=o.inner.length?o.inner:[o];this.inner.push(...i)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}fs=Symbol.hasInstance;ps=Symbol.toStringTag;class oe extends Error{static formatError(t,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof t=="string"?t.replace(Vo,(s,o)=>Ae(n[o])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,s,o){const i=new tr(t,n,r,s);if(o)return i;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[ps]="Error",this.name=i.name,this.message=i.message,this.type=i.type,this.value=i.value,this.path=i.path,this.errors=i.errors,this.inner=i.inner,Error.captureStackTrace&&Error.captureStackTrace(this,oe)}static[fs](t){return tr[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let ge={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Ae(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${Ae(n,!0)}\``+s:`${e} must match the configured type. The validated value was: \`${Ae(n,!0)}\``+s}},re={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Bo={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},fn={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},$o={isValue:"${path} field must be ${value}"},pn={noUnknown:"${path} field has unspecified keys: ${unknown}"},ko={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},jo={notType:e=>{const{path:t,value:n,spec:r}=e,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${t} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Ae(n,!0)}\``;if(n.length>s)return`${t} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Ae(n,!0)}\``}return oe.formatError(ge.notType,e)}};Object.assign(Object.create(null),{mixed:ge,string:re,number:Bo,date:fn,object:pn,array:ko,boolean:$o,tuple:jo});const xn=e=>e&&e.__isYupSchema__;class xt{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:o}=n,i=typeof r=="function"?r:(...l)=>l.every(a=>a===r);return new xt(t,(l,a)=>{var u;let c=i(...l)?s:o;return(u=c==null?void 0:c(a))!=null?u:a})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(o=>o.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,t,n);if(s===void 0||s===t)return t;if(!xn(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const gt={context:"$",value:"."};class ze{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===gt.context,this.isValue=this.key[0]===gt.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?gt.context:this.isValue?gt.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Ne.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let s=this.isContext?r:this.isValue?t:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}ze.prototype.__isYupRef=!0;const Ce=e=>e==null;function Ze(e){function t({value:n,path:r="",options:s,originalValue:o,schema:i},l,a){const{name:u,test:c,params:d,message:h,skipAbsent:m}=e;let{parent:p,context:I,abortEarly:_=i.spec.abortEarly,disableStackTrace:E=i.spec.disableStackTrace}=s;function f(v){return ze.isRef(v)?v.getValue(n,p,I):v}function g(v={}){const C=Object.assign({value:n,originalValue:o,label:i.spec.label,path:v.path||r,spec:i.spec,disableStackTrace:v.disableStackTrace||E},d,v.params);for(const A of Object.keys(C))C[A]=f(C[A]);const V=new oe(oe.formatError(v.message||h,C),n,C.path,v.type||u,C.disableStackTrace);return V.params=C,V}const R=_?l:a;let y={path:r,parent:p,type:u,from:s.from,createError:g,resolve:f,options:s,originalValue:o,schema:i};const S=v=>{oe.isError(v)?R(v):v?a(null):R(g())},M=v=>{oe.isError(v)?R(v):l(v)};if(m&&Ce(n))return S(!0);let w;try{var L;if(w=c.call(y,n,y),typeof((L=w)==null?void 0:L.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${y.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(w).then(S,M)}}catch(v){M(v);return}S(w)}return t.OPTIONS=e,t}function qo(e,t,n,r=n){let s,o,i;return t?(Ne.forEach(t,(l,a,u)=>{let c=a?l.slice(1,l.length-1):l;e=e.resolve({context:r,parent:s,value:n});let d=e.type==="tuple",h=u?parseInt(c,10):0;if(e.innerType||d){if(d&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${i}" must contain an index to the tuple element, e.g. "${i}[0]"`);if(n&&h>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);s=n,n=n&&n[h],e=d?e.spec.types[h]:e.innerType}if(!u){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e.type}")`);s=n,n=n&&n[c],e=e.fields[c]}o=c,i=a?"["+l+"]":"."+l}),{schema:e,parent:s,parentPath:o}):{parent:s,parentPath:t,schema:e}}class Ct extends Set{describe(){const t=[];for(const n of this.values())t.push(ze.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new Ct(this.values())}merge(t,n){const r=this.clone();return t.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function Qe(e,t=new Map){if(xn(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=Qe(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,s]of e.entries())n.set(r,Qe(s,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(Qe(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,s]of Object.entries(e))n[r]=Qe(s,t)}else throw Error(`Unable to clone ${e}`);return n}class Te{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Ct,this._blacklist=new Ct,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ge.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Qe(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(o=>{t.tests.forEach(i=>{o.test(i.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,o)=>o.resolve(s,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,s,o;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=t.recursive)!=null?s:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),s=n.assert==="ignore-optionality",o=r._cast(t,n);if(n.assert!==!1&&!r.isType(o)){if(s&&Ce(o))return o;let i=Ae(t),l=Ae(o);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${i} 
`+(l!==i?`result of cast: ${l}`:""))}return o}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((s,o)=>o.call(this,s,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,s){let{path:o,originalValue:i=t,strict:l=this.spec.strict}=n,a=t;l||(a=this._cast(a,Object.assign({assert:!1},n)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:o,value:a,originalValue:i,options:n,tests:u},r,c=>{if(c.length)return s(c,a);this.runTests({path:o,value:a,originalValue:i,options:n,tests:this.tests},r,s)})}runTests(t,n,r){let s=!1,{tests:o,value:i,originalValue:l,path:a,options:u}=t,c=I=>{s||(s=!0,n(I,i))},d=I=>{s||(s=!0,r(I,i))},h=o.length,m=[];if(!h)return d([]);let p={value:i,originalValue:l,path:a,options:u,schema:this};for(let I=0;I<o.length;I++){const _=o[I];_(p,c,function(f){f&&(Array.isArray(f)?m.push(...f):m.push(f)),--h<=0&&d(m)})}}asNestedTest({key:t,index:n,parent:r,parentPath:s,originalParent:o,options:i}){const l=t??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const a=typeof l=="number";let u=r[l];const c=Object.assign({},i,{strict:!0,parent:r,value:u,originalValue:o[l],key:void 0,[a?"index":"key"]:l,path:a||l.includes(".")?`${s||""}[${a?l:`"${l}"`}]`:(s?`${s}.`:"")+t});return(d,h,m)=>this.resolve(c)._validate(u,c,h,m)}validate(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((i,l)=>s._validate(t,n,(a,u)=>{oe.isError(a)&&(a.value=u),l(a)},(a,u)=>{a.length?l(new oe(a,u,void 0,void 0,o)):i(u)}))}validateSync(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),o,i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(t,Object.assign({},n,{sync:!0}),(l,a)=>{throw oe.isError(l)&&(l.value=a),l},(l,a)=>{if(l.length)throw new oe(l,t,void 0,void 0,i);o=a}),o}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(oe.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(oe.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Qe(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=Ze({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=Ze({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=ge.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=ge.notNull){return this.nullability(!1,t)}required(t=ge.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=ge.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=Ze(n),o=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(i=>!(i.OPTIONS.name===n.name&&(o||i.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),s=us(t).map(o=>new ze(o));return s.forEach(o=>{o.isSibling&&r.deps.push(o.key)}),r.conditions.push(typeof n=="function"?new xt(s,n):xt.fromOptions(s,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=Ze({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=ge.oneOf){let r=this.clone();return t.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=Ze({message:n,name:"oneOf",skipAbsent:!0,test(s){let o=this.schema._whitelist,i=o.resolveAll(this.resolve);return i.includes(s)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:i}})}}),r}notOneOf(t,n=ge.notOneOf){let r=this.clone();return t.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=Ze({message:n,name:"notOneOf",test(s){let o=this.schema._blacklist,i=o.resolveAll(this.resolve);return i.includes(s)?this.createError({params:{values:Array.from(o).join(", "),resolved:i}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:s,optional:o,nullable:i}=n.spec;return{meta:s,label:r,optional:o,nullable:i,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(a=>({name:a.OPTIONS.name,params:a.OPTIONS.params})).filter((a,u,c)=>c.findIndex(d=>d.name===a.name)===u)}}}Te.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Te.prototype[`${e}At`]=function(t,n,r={}){const{parent:s,parentPath:o,schema:i}=qo(this,t,n,r.context);return i[e](s&&s[o],Object.assign({},r,{parent:s,path:t}))};for(const e of["equals","is"])Te.prototype[e]=Te.prototype.oneOf;for(const e of["not","nope"])Te.prototype[e]=Te.prototype.notOneOf;const zo=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Ho(e){const t=hn(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function hn(e){var t,n;const r=zo.exec(e);return r?{year:Re(r[1]),month:Re(r[2],1)-1,day:Re(r[3],1),hour:Re(r[4]),minute:Re(r[5]),second:Re(r[6]),millisecond:r[7]?Re(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Re(r[10]),minuteOffset:Re(r[11])}:null}function Re(e,t=0){return Number(e)||t}let Wo=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Yo=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Xo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Zo="^\\d{4}-\\d{2}-\\d{2}",Qo="\\d{2}:\\d{2}:\\d{2}",Ko="(([+-]\\d{2}(:?\\d{2})?)|Z)",Jo=new RegExp(`${Zo}T${Qo}(\\.\\d+)?${Ko}$`),ea=e=>Ce(e)||e===e.trim(),ta={}.toString();function le(){return new hs}class hs extends Te{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const s=t!=null&&t.toString?t.toString():t;return s===ta?t:s})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||ge.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=re.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=re.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=re.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,s,o;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:o}=n:s=n),this.test({name:o||"matches",message:s||re.matches,params:{regex:t},skipAbsent:!0,test:i=>i===""&&r||i.search(t)!==-1})}email(t=re.email){return this.matches(Wo,{name:"email",message:t,excludeEmptyString:!0})}url(t=re.url){return this.matches(Yo,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=re.uuid){return this.matches(Xo,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,s;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=t:n=t),this.matches(Jo,{name:"datetime",message:n||re.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||re.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:o=>{if(!o||r)return!0;const i=hn(o);return i?!!i.z:!1}}).test({name:"datetime_precision",message:n||re.datetime_precision,params:{precision:s},skipAbsent:!0,test:o=>{if(!o||s==null)return!0;const i=hn(o);return i?i.precision===s:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=re.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:ea})}lowercase(t=re.lowercase){return this.transform(n=>Ce(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ce(n)||n===n.toLowerCase()})}uppercase(t=re.uppercase){return this.transform(n=>Ce(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ce(n)||n===n.toUpperCase()})}}le.prototype=hs.prototype;let ms=new Date(""),na=e=>Object.prototype.toString.call(e)==="[object Date]";function Cn(){return new pt}class pt extends Te{constructor(){super({type:"date",check(t){return na(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=Ho(t),isNaN(t)?pt.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if(ze.isRef(t))r=t;else{let s=this.cast(t);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(t,n=fn.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(t,n=fn.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}pt.INVALID_DATE=ms;Cn.prototype=pt.prototype;Cn.INVALID_DATE=ms;function ra(e,t=[]){let n=[],r=new Set,s=new Set(t.map(([i,l])=>`${i}-${l}`));function o(i,l){let a=Ne.split(i)[0];r.add(a),s.has(`${l}-${a}`)||n.push([l,a])}for(const i of Object.keys(e)){let l=e[i];r.add(i),ze.isRef(l)&&l.isSibling?o(l.path,i):xn(l)&&"deps"in l&&l.deps.forEach(a=>o(a,i))}return Mo.array(Array.from(r),n).reverse()}function nr(e,t){let n=1/0;return e.some((r,s)=>{var o;if((o=t.path)!=null&&o.includes(r))return n=s,!0}),n}function Es(e){return(t,n)=>nr(e,t)-nr(e,n)}const sa=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function vt(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=vt(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=vt(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(vt)}):"optional"in e?e.optional():e}const ia=(e,t)=>{const n=[...Ne.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),s=Ne.getter(Ne.join(n),!0)(e);return!!(s&&r in s)};let rr=e=>Object.prototype.toString.call(e)==="[object Object]";function oa(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const aa=Es([]);function Mn(e){return new gs(e)}class gs extends Te{constructor(t){super({type:"object",check(n){return rr(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=aa,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let s=super._cast(t,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let o=this.fields,i=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(s).filter(d=>!this._nodes.includes(d))),a={},u=Object.assign({},n,{parent:a,__validating:n.__validating||!1}),c=!1;for(const d of l){let h=o[d],m=d in s;if(h){let p,I=s[d];u.path=(n.path?`${n.path}.`:"")+d,h=h.resolve({value:I,context:n.context,parent:a});let _=h instanceof Te?h.spec:void 0,E=_==null?void 0:_.strict;if(_!=null&&_.strip){c=c||d in s;continue}p=!n.__validating||!E?h.cast(s[d],u):s[d],p!==void 0&&(a[d]=p)}else m&&!i&&(a[d]=s[d]);(m!==d in a||a[d]!==s[d])&&(c=!0)}return c?a:s}_validate(t,n={},r,s){let{from:o=[],originalValue:i=t,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:i},...o],n.__validating=!0,n.originalValue=i,super._validate(t,n,r,(a,u)=>{if(!l||!rr(u)){s(a,u);return}i=i||u;let c=[];for(let d of this._nodes){let h=this.fields[d];!h||ze.isRef(h)||c.push(h.asNestedTest({options:n,key:d,parent:u,parentPath:n.path,originalParent:i}))}this.runTests({tests:c,value:u,originalValue:i,options:n},r,d=>{s(d.sort(this._sortErrors).concat(a),u)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[s,o]of Object.entries(this.fields)){const i=r[s];r[s]=i===void 0?o:i}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const o=this.fields[r];let i=t;(s=i)!=null&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[r]})),n[r]=o&&"getDefault"in o?o.getDefault(i):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=ra(t,n),r._sortErrors=Es(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),s)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return vt(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>t.includes(r)&&t.includes(s)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let s=Ne.getter(t,!0);return this.transform(o=>{if(!o)return o;let i=o;return ia(o,t)&&(i=Object.assign({},o),r||delete i[t],i[n]=s(o)),i})}json(){return this.transform(sa)}noUnknown(t=!0,n=pn.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const o=oa(this.schema,s);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=pn.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[t(s)]=n[s];return r})}camelCase(){return this.transformKeys(Jt.camelCase)}snakeCase(){return this.transformKeys(Jt.snakeCase)}constantCase(){return this.transformKeys(t=>Jt.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[o,i]of Object.entries(n.fields)){var s;let l=t;(s=l)!=null&&s.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[o]})),r.fields[o]=i.describe(l)}return r}}Mn.prototype=gs.prototype;const sr=(e,t,n)=>{if(e&&"reportValidity"in e){const r=cn(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Is=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?sr(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>sr(s,n,e))}},la=(e,t)=>{t.shouldUseNativeValidation&&Is(e,t);const n={};for(const r in e){const s=cn(t.fields,r),o=Object.assign(e[r]||{},{ref:s&&s.ref});if(ca(t.names||Object.keys(e),r)){const i=Object.assign({},cn(n,r));Yt(i,"root",o),Yt(n,r,i)}else Yt(n,r,o)}return n},ca=(e,t)=>{const n=ir(t);return e.some(r=>ir(r).match(`^${n}\\.\\d+`))};function ir(e){return e.replace(/\]|\[/g,"")}function _s(e,t,n){return n===void 0&&(n={}),function(r,s,o){try{return Promise.resolve(function(i,l){try{var a=(t!=null&&t.context,Promise.resolve(e[n.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},t,{context:s}))).then(function(u){return o.shouldUseNativeValidation&&Is({},o),{values:n.raw?Object.assign({},r):u,errors:{}}}))}catch(u){return l(u)}return a&&a.then?a.then(void 0,l):a}(0,function(i){if(!i.inner)throw i;return{values:{},errors:la((l=i,a=!o.shouldUseNativeValidation&&o.criteriaMode==="all",(l.inner||[]).reduce(function(u,c){if(u[c.path]||(u[c.path]={message:c.message,type:c.type}),a){var d=u[c.path].types,h=d&&d[c.type];u[c.path]=Ti(c.path,a,u,c.type,h?[].concat(h,c.message):c.message)}return u},{})),o)};var l,a}))}catch(i){return Promise.reject(i)}}}const ua=e=>is.post("/api/child",e).then(t=>t.data),Ts=N.createContext(),da=({children:e})=>{const[t,n]=N.useState(null),[r,s]=N.useState(null);return T.jsx(Ts.Provider,{value:{childId:t,setChildId:n,parentId:r,setParentId:s},children:e})},Ln=()=>N.useContext(Ts),fa=()=>{const{setChildId:e}=Ln(),t=[{name:"firstName",label:"Nombre",type:"text",size:.5},{name:"lastName",label:"Apellido",type:"text",size:.5},{name:"birthDate",label:"Fecha de nacimiento",type:"date",size:.5},{name:"gender",label:"Género",type:"select",options:[{label:"Masculino",value:"MASCULINO"},{label:"Femenino",value:"FEMENINO"}],size:.5},{name:"documentId",label:"Documento de identidad",type:"text",size:1},{name:"medicalNotes",label:"Notas médicas",type:"textarea",size:1},{name:"allergies",label:"Alergias",type:"textarea",size:1}],n=Mn().shape({firstName:le().required("El nombre es obligatorio").max(50,"Máximo 50 caracteres"),lastName:le().required("El apellido es obligatorio").max(50,"Máximo 50 caracteres"),birthDate:Cn().typeError("Debe ser una fecha válida").required("La fecha de nacimiento es obligatoria").max(new Date,"La fecha no puede ser futura").nullable().transform((l,a)=>a===""?void 0:l),gender:le().oneOf(["MASCULINO","FEMENINO"],"Género inválido").required("El género es obligatorio"),documentId:le().required("El documento de identidad es obligatorio").max(20,"Máximo 20 caracteres"),medicalNotes:le().max(200,"Máximo 200 caracteres").nullable(),allergies:le().max(100,"Máximo 100 caracteres").nullable()}),r=Ft({resolver:_s(n),mode:"onTouched"}),{nextStep:s}=st(),o=r.handleSubmit(l=>{console.log(l),i.mutate(l),e(l.documentId),s()}),i=On({mutationFn:ua,onSuccess:()=>{Dn.success("Datos guardados exitosamente")}});return{childForm:t,childSchema:n,handleChildSubmit:o,methods:r}},Ut=({handleSubmit:e})=>{const{previousStep:t,isLastStep:n,isFirstStep:r,stepCount:s,activeStep:o}=st(),i=os(),l=()=>{e(),i("/form-register-end")};return T.jsxs(Q,{sx:{display:"flex",pt:3,gap:2,width:"100%",justifyContent:"space-between",alignItems:"center",mt:2},children:[T.jsx(un,{color:"secondary",disabled:r,onClick:t,variant:"contained",children:"Atrás"}),T.jsx(yi,{children:T.jsx(un,{color:"secondary",onClick:n?l:e,variant:"contained",children:n?"Finalizar":"Siguiente"})})]})},pa=qe(T.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined"),Vt=({children:e,color:t,bgNote:n,textColor:r,textSize:s})=>T.jsx(T.Fragment,{children:T.jsxs(Q,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},bgcolor:n||"primary",borderLeft:{xs:"none",sm:"4px solid"},borderColor:{sm:t},padding:{xs:1,sm:2},borderRadius:2,mb:2,flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[T.jsx(pa,{sx:{color:t,fontSize:{xs:20,sm:30}}}),T.jsx(Ri,{sx:{fontWeight:500},color:r||"text.primary",variant:s||"body2",children:e})]})}),ha=()=>{const{childForm:e,handleChildSubmit:t,methods:n}=fa();return T.jsx(T.Fragment,{children:T.jsxs(vn,{...n,children:[T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"55%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsx(Vt,{color:"#673ab7",bgNote:"#f3f3f3",children:"Completa los datos personales del niño o niña. Esta información nos ayudará a brindarle una atención adecuada y personalizada."})}),T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"50%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsx(An,{formItems:e})}),T.jsx(Ut,{handleSubmit:t})]})})},ma=e=>is.post("/api/attendant",e).then(t=>t.data),Ea=()=>{const{setParentId:e}=Ln(),t=[{name:"documentId",label:"Documento de Identidad",type:"text",size:1},{name:"firstName",label:"Nombre",type:"text",size:.5},{name:"lastName",label:"Apellido",type:"text",size:.5},{name:"relationship",label:"Parentesco",type:"text",size:.5},{name:"phoneNumber",label:"Número de Teléfono",type:"text",size:.5},{name:"email",label:"Correo Electrónico",type:"email",size:1}],n=Mn().shape({documentId:le().required("El documento es obligatorio").max(20,"Máximo 20 caracteres"),firstName:le().required("El nombre es obligatorio").max(50,"Máximo 50 caracteres"),lastName:le().required("El apellido es obligatorio").max(50,"Máximo 50 caracteres"),relationship:le().max(20,"Máximo 20 caracteres"),phoneNumber:le().max(20,"Máximo 20 caracteres"),email:le().email("Correo no válido").max(100,"Máximo 100 caracteres")}),r=Ft({resolver:_s(n),mode:"onTouched"}),{nextStep:s}=st(),o=r.handleSubmit(l=>{console.log(l),i.mutate(l),e(l.documentId),s()}),i=On({mutationFn:ma,onSuccess:()=>Dn.success("Datos guardados exitosamente")});return{guardianForm:t,guardianSchema:n,handleGuardSubmit:o,guardiantContextForm:r}},ga=()=>{const{guardianForm:e,handleGuardSubmit:t,guardiantContextForm:n}=Ea();return T.jsx(T.Fragment,{children:T.jsxs(vn,{...n,children:[T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"55%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsxs(Vt,{textColor:"gray",color:"#673ab7",bgNote:"#f3f3f3",children:["Ingresa los datos del acudiente principal. Es importante contar con esta información para mantenernos en contacto y garantizar la seguridad del niño o niña."," "]})}),T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"50%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsx(An,{formItems:e})}),T.jsx(Ut,{handleSubmit:t})]})})};/*!
 * FilePond 4.32.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ia=e=>e instanceof HTMLElement,_a=(e,t=[],n=[])=>{const r={...e},s=[],o=[],i=()=>({...r}),l=()=>{const p=[...s];return s.length=0,p},a=()=>{const p=[...o];o.length=0,p.forEach(({type:I,data:_})=>{u(I,_)})},u=(p,I,_)=>{if(_&&!document.hidden){o.push({type:p,data:I});return}m[p]&&m[p](I),s.push({type:p,data:I})},c=(p,...I)=>h[p]?h[p](...I):null,d={getState:i,processActionQueue:l,processDispatchQueue:a,dispatch:u,query:c};let h={};t.forEach(p=>{h={...p(r),...h}});let m={};return n.forEach(p=>{m={...p(u,c,r),...m}}),d},Ta=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},j=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},we=e=>{const t={};return j(e,n=>{Ta(t,n,e[n])}),t},W=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},ya="http://www.w3.org/2000/svg",Ra=["svg","path"],or=e=>Ra.includes(e),Mt=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=or(e)?document.createElementNS(ya,e):document.createElement(e);return t&&(or(e)?W(r,"class",t):r.className=t),j(n,(s,o)=>{W(r,s,o)}),r},Sa=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},ba=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),Oa=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),Da=typeof window<"u"&&typeof window.document<"u",ys=()=>Da,va=ys()?Mt("svg"):{},Aa="children"in va?e=>e.children.length:e=>e.childNodes.length,Rs=(e,t,n,r)=>{const s=n[0]||e.left,o=n[1]||e.top,i=s+e.width,l=o+e.height*(r[1]||1),a={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:o,right:i,bottom:l}};return t.filter(u=>!u.isRectIgnored()).map(u=>u.rect).forEach(u=>{ar(a.inner,{...u.inner}),ar(a.outer,{...u.outer})}),lr(a.inner),a.outer.bottom+=a.element.marginBottom,a.outer.right+=a.element.marginRight,lr(a.outer),a},ar=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},lr=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Me=e=>typeof e=="number",wa=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,xa=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,s=null,o=0,i=!1;const u=we({interpolate:(c,d)=>{if(i)return;if(!(Me(r)&&Me(s))){i=!0,o=0;return}const h=-(s-r)*e;o+=h/n,s+=o,o*=t,wa(s,r,o)||d?(s=r,o=0,i=!0,u.onupdate(s),u.oncomplete(s)):u.onupdate(s)},target:{set:c=>{if(Me(c)&&!Me(s)&&(s=c),r===null&&(r=c,s=c),r=c,s===r||typeof r>"u"){i=!0,o=0,u.onupdate(s),u.oncomplete(s);return}i=!1},get:()=>r},resting:{get:()=>i},onupdate:c=>{},oncomplete:c=>{}});return u},Ca=e=>e<.5?2*e*e:-1+(4-2*e)*e,Ma=({duration:e=500,easing:t=Ca,delay:n=0}={})=>{let r=null,s,o,i=!0,l=!1,a=null;const c=we({interpolate:(d,h)=>{i||a===null||(r===null&&(r=d),!(d-r<n)&&(s=d-r-n,s>=e||h?(s=1,o=l?0:1,c.onupdate(o*a),c.oncomplete(o*a),i=!0):(o=s/e,c.onupdate((s>=0?t(l?1-o:o):0)*a))))},target:{get:()=>l?0:a,set:d=>{if(a===null){a=d,c.onupdate(d),c.oncomplete(d);return}d<a?(a=1,l=!0):(l=!1,a=d),i=!1,r=null}},resting:{get:()=>i},onupdate:d=>{},oncomplete:d=>{}});return c},cr={spring:xa,tween:Ma},La=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,s=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return cr[s]?cr[s](o):null},Pn=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(o=>{let i=o,l=()=>n[o],a=u=>n[o]=u;typeof o=="object"&&(i=o.key,l=o.getter||l,a=o.setter||a),!(s[i]&&!r)&&(s[i]={get:l,set:a})})})},Pa=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const s={...t},o=[];return j(e,(i,l)=>{const a=La(l);if(!a)return;a.onupdate=c=>{t[i]=c},a.target=s[i],Pn([{key:i,setter:c=>{a.target!==c&&(a.target=c)},getter:()=>t[i]}],[n,r],t,!0),o.push(a)}),{write:i=>{let l=document.hidden,a=!0;return o.forEach(u=>{u.resting||(a=!1),u.interpolate(i,l)}),a},destroy:()=>{}}},Na=e=>(t,n)=>{e.addEventListener(t,n)},Fa=e=>(t,n)=>{e.removeEventListener(t,n)},Ga=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:s,view:o})=>{const i=[],l=Na(o.element),a=Fa(o.element);return r.on=(u,c)=>{i.push({type:u,fn:c}),l(u,c)},r.off=(u,c)=>{i.splice(i.findIndex(d=>d.type===u&&d.fn===c),1),a(u,c)},{write:()=>!0,destroy:()=>{i.forEach(u=>{a(u.type,u.fn)})}}},Ua=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{Pn(e,n,t)},K=e=>e!=null,Va={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Ba=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:s})=>{const o={...t},i={};Pn(e,[n,r],t);const l=()=>[t.translateX||0,t.translateY||0],a=()=>[t.scaleX||0,t.scaleY||0],u=()=>s.rect?Rs(s.rect,s.childViews,l(),a()):null;return n.rect={get:u},r.rect={get:u},e.forEach(c=>{t[c]=typeof o[c]>"u"?Va[c]:o[c]}),{write:()=>{if($a(i,t))return ka(s.element,t),Object.assign(i,{...t}),!0},destroy:()=>{}}},$a=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},ka=(e,{opacity:t,perspective:n,translateX:r,translateY:s,scaleX:o,scaleY:i,rotateX:l,rotateY:a,rotateZ:u,originX:c,originY:d,width:h,height:m})=>{let p="",I="";(K(c)||K(d))&&(I+=`transform-origin: ${c||0}px ${d||0}px;`),K(n)&&(p+=`perspective(${n}px) `),(K(r)||K(s))&&(p+=`translate3d(${r||0}px, ${s||0}px, 0) `),(K(o)||K(i))&&(p+=`scale3d(${K(o)?o:1}, ${K(i)?i:1}, 1) `),K(u)&&(p+=`rotateZ(${u}rad) `),K(l)&&(p+=`rotateX(${l}rad) `),K(a)&&(p+=`rotateY(${a}rad) `),p.length&&(I+=`transform:${p};`),K(t)&&(I+=`opacity:${t};`,t===0&&(I+="visibility:hidden;"),t<1&&(I+="pointer-events:none;")),K(m)&&(I+=`height:${m}px;`),K(h)&&(I+=`width:${h}px;`);const _=e.elementCurrentStyle||"";(I.length!==_.length||I!==_)&&(e.style.cssText=I,e.elementCurrentStyle=I)},ja={styles:Ba,listeners:Ga,animations:Pa,apis:Ua},ur=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),H=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:s=()=>{},create:o=()=>{},destroy:i=()=>{},filterFrameActionsForChild:l=(m,p)=>p,didCreateView:a=()=>{},didWriteView:u=()=>{},ignoreRect:c=!1,ignoreRectUpdate:d=!1,mixins:h=[]}={})=>(m,p={})=>{const I=Mt(e,`filepond--${t}`,n),_=window.getComputedStyle(I,null),E=ur();let f=null,g=!1;const R=[],y=[],S={},M={},b=[s],w=[r],L=[i],v=()=>I,C=()=>R.concat(),V=()=>S,A=$=>(Z,ye)=>Z($,ye),B=()=>f||(f=Rs(E,R,[0,0],[1,1]),f),O=()=>_,x=()=>{f=null,R.forEach(ye=>ye._read()),!(d&&E.width&&E.height)&&ur(E,I,_);const Z={root:pe,props:p,rect:E};w.forEach(ye=>ye(Z))},P=($,Z,ye)=>{let Ye=Z.length===0;return b.forEach(ne=>{ne({props:p,root:pe,actions:Z,timestamp:$,shouldOptimize:ye})===!1&&(Ye=!1)}),y.forEach(ne=>{ne.write($)===!1&&(Ye=!1)}),R.filter(ne=>!!ne.element.parentNode).forEach(ne=>{ne._write($,l(ne,Z),ye)||(Ye=!1)}),R.forEach((ne,mt)=>{ne.element.parentNode||(pe.appendChild(ne.element,mt),ne._read(),ne._write($,l(ne,Z),ye),Ye=!1)}),g=Ye,u({props:p,root:pe,actions:Z,timestamp:$}),Ye},F=()=>{y.forEach($=>$.destroy()),L.forEach($=>{$({root:pe,props:p})}),R.forEach($=>$._destroy())},k={element:{get:v},style:{get:O},childViews:{get:C}},U={...k,rect:{get:B},ref:{get:V},is:$=>t===$,appendChild:Sa(I),createChildView:A(m),linkView:$=>(R.push($),$),unlinkView:$=>{R.splice(R.indexOf($),1)},appendChildView:ba(I,R),removeChildView:Oa(I,R),registerWriter:$=>b.push($),registerReader:$=>w.push($),registerDestroyer:$=>L.push($),invalidateLayout:()=>I.layoutCalculated=!1,dispatch:m.dispatch,query:m.query},xe={element:{get:v},childViews:{get:C},rect:{get:B},resting:{get:()=>g},isRectIgnored:()=>c,_read:x,_write:P,_destroy:F},ot={...k,rect:{get:()=>E}};Object.keys(h).sort(($,Z)=>$==="styles"?1:Z==="styles"?-1:0).forEach($=>{const Z=ja[$]({mixinConfig:h[$],viewProps:p,viewState:M,viewInternalAPI:U,viewExternalAPI:xe,view:we(ot)});Z&&y.push(Z)});const pe=we(U);o({root:pe,props:p});const Wt=Aa(I);return R.forEach(($,Z)=>{pe.appendChild($.element,Wt+Z)}),a(pe),we(xe)},qa=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const s=window[r],o=1e3/n;let i=null,l=null,a=null,u=null;const c=()=>{document.hidden?(a=()=>window.setTimeout(()=>d(performance.now()),o),u=()=>window.clearTimeout(l)):(a=()=>window.requestAnimationFrame(d),u=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{u&&u(),c(),d(performance.now())});const d=h=>{l=a(d),i||(i=h);const m=h-i;m<=o||(i=h-m%o,s.readers.forEach(p=>p()),s.writers.forEach(p=>p(h)))};return c(),d(performance.now()),{pause:()=>{u(l)}}},te=(e,t)=>({root:n,props:r,actions:s=[],timestamp:o,shouldOptimize:i})=>{s.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:r,action:l.data,timestamp:o,shouldOptimize:i})),t&&t({root:n,props:r,actions:s,timestamp:o,shouldOptimize:i})},dr=(e,t)=>t.parentNode.insertBefore(e,t),fr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Bt=e=>Array.isArray(e),be=e=>e==null,za=e=>e.trim(),$t=e=>""+e,Ha=(e,t=",")=>be(e)?[]:Bt(e)?e:$t(e).split(t).map(za).filter(n=>n.length),Ss=e=>typeof e=="boolean",bs=e=>Ss(e)?e:e==="true",J=e=>typeof e=="string",Os=e=>Me(e)?e:J(e)?$t(e).replace(/[a-z]+/gi,""):0,At=e=>parseInt(Os(e),10),pr=e=>parseFloat(Os(e)),it=e=>Me(e)&&isFinite(e)&&Math.floor(e)===e,hr=(e,t=1e3)=>{if(it(e))return e;let n=$t(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),At(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),At(n)*t):At(n)},Le=e=>typeof e=="function",Wa=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},mr={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Ya=e=>{const t={};return t.url=J(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},j(mr,n=>{t[n]=Xa(n,e[n],mr[n],t.timeout,t.headers)}),t.process=e.process||J(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Xa=(e,t,n,r,s)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:s,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(J(t))return o.url=t,o;if(Object.assign(o,t),J(o.headers)){const i=o.headers.split(/:(.+)/);o.headers={header:i[0],value:i[1]}}return o.withCredentials=bs(o.withCredentials),o},Za=e=>Ya(e),Qa=e=>e===null,X=e=>typeof e=="object"&&e!==null,Ka=e=>X(e)&&J(e.url)&&X(e.process)&&X(e.revert)&&X(e.restore)&&X(e.fetch),mn=e=>Bt(e)?"array":Qa(e)?"null":it(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Ka(e)?"api":typeof e,Ja=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),el={array:Ha,boolean:bs,int:e=>mn(e)==="bytes"?hr(e):At(e),number:pr,float:pr,bytes:hr,string:e=>Le(e)?e:$t(e),function:e=>Wa(e),serverapi:Za,object:e=>{try{return JSON.parse(Ja(e))}catch{return null}}},tl=(e,t)=>el[t](e),Ds=(e,t,n)=>{if(e===t)return e;let r=mn(e);if(r!==n){const s=tl(e,n);if(r=mn(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=s}return e},nl=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=Ds(r,e,t)}}},rl=e=>{const t={};return j(e,n=>{const r=e[n];t[n]=nl(r[0],r[1])}),we(t)},sl=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:rl(e)}),kt=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),il=(e,t)=>{const n={};return j(t,r=>{n[r]={get:()=>e.getState().options[r],set:s=>{e.dispatch(`SET_${kt(r,"_").toUpperCase()}`,{value:s})}}}),n},ol=e=>(t,n,r)=>{const s={};return j(e,o=>{const i=kt(o,"_").toUpperCase();s[`SET_${i}`]=l=>{try{r.options[o]=l.value}catch{}t(`DID_SET_${i}`,{value:r.options[o]})}}),s},al=e=>t=>{const n={};return j(e,r=>{n[`GET_${kt(r,"_").toUpperCase()}`]=s=>t.options[r]}),n},fe={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Nn=()=>Math.random().toString(36).substring(2,11),Fn=(e,t)=>e.splice(t,1),ll=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},jt=()=>{const e=[],t=(r,s)=>{Fn(e,e.findIndex(o=>o.event===r&&(o.cb===s||!s)))},n=(r,s,o)=>{e.filter(i=>i.event===r).map(i=>i.cb).forEach(i=>ll(()=>i(...s),o))};return{fireSync:(r,...s)=>{n(r,s,!0)},fire:(r,...s)=>{n(r,s,!1)},on:(r,s)=>{e.push({event:r,cb:s})},onOnce:(r,s)=>{e.push({event:r,cb:(...o)=>{t(r,s),s(...o)}})},off:t}},vs=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},cl=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],se=e=>{const t={};return vs(e,t,cl),t},ul=e=>{e.forEach((t,n)=>{t.released&&Fn(e,n)})},G={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Y={INPUT:1,LIMBO:2,LOCAL:3},As=e=>/[^0-9]+/.exec(e),ws=()=>As(1.1.toLocaleString())[0],dl=()=>{const e=ws(),t=1e3.toLocaleString();return t!=="1000"?As(t)[0]:e==="."?",":"."},D={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Gn=[],he=(e,t,n)=>new Promise((r,s)=>{const o=Gn.filter(l=>l.key===e).map(l=>l.cb);if(o.length===0){r(t);return}const i=o.shift();o.reduce((l,a)=>l.then(u=>a(u,n)),i(t,n)).then(l=>r(l)).catch(l=>s(l))}),He=(e,t,n)=>Gn.filter(r=>r.key===e).map(r=>r.cb(t,n)),fl=(e,t)=>Gn.push({key:e,cb:t}),pl=e=>Object.assign(Ke,e),Lt=()=>({...Ke}),hl=e=>{j(e,(t,n)=>{Ke[t]&&(Ke[t][0]=Ds(n,Ke[t][0],Ke[t][1]))})},Ke={id:[null,D.STRING],name:["filepond",D.STRING],disabled:[!1,D.BOOLEAN],className:[null,D.STRING],required:[!1,D.BOOLEAN],captureMethod:[null,D.STRING],allowSyncAcceptAttribute:[!0,D.BOOLEAN],allowDrop:[!0,D.BOOLEAN],allowBrowse:[!0,D.BOOLEAN],allowPaste:[!0,D.BOOLEAN],allowMultiple:[!1,D.BOOLEAN],allowReplace:[!0,D.BOOLEAN],allowRevert:[!0,D.BOOLEAN],allowRemove:[!0,D.BOOLEAN],allowProcess:[!0,D.BOOLEAN],allowReorder:[!1,D.BOOLEAN],allowDirectoriesOnly:[!1,D.BOOLEAN],storeAsFile:[!1,D.BOOLEAN],forceRevert:[!1,D.BOOLEAN],maxFiles:[null,D.INT],checkValidity:[!1,D.BOOLEAN],itemInsertLocationFreedom:[!0,D.BOOLEAN],itemInsertLocation:["before",D.STRING],itemInsertInterval:[75,D.INT],dropOnPage:[!1,D.BOOLEAN],dropOnElement:[!0,D.BOOLEAN],dropValidation:[!1,D.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],D.ARRAY],instantUpload:[!0,D.BOOLEAN],maxParallelUploads:[2,D.INT],allowMinimumUploadDuration:[!0,D.BOOLEAN],chunkUploads:[!1,D.BOOLEAN],chunkForce:[!1,D.BOOLEAN],chunkSize:[5e6,D.INT],chunkRetryDelays:[[500,1e3,3e3],D.ARRAY],server:[null,D.SERVER_API],fileSizeBase:[1e3,D.INT],labelFileSizeBytes:["bytes",D.STRING],labelFileSizeKilobytes:["KB",D.STRING],labelFileSizeMegabytes:["MB",D.STRING],labelFileSizeGigabytes:["GB",D.STRING],labelDecimalSeparator:[ws(),D.STRING],labelThousandsSeparator:[dl(),D.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',D.STRING],labelInvalidField:["Field contains invalid files",D.STRING],labelFileWaitingForSize:["Waiting for size",D.STRING],labelFileSizeNotAvailable:["Size not available",D.STRING],labelFileCountSingular:["file in list",D.STRING],labelFileCountPlural:["files in list",D.STRING],labelFileLoading:["Loading",D.STRING],labelFileAdded:["Added",D.STRING],labelFileLoadError:["Error during load",D.STRING],labelFileRemoved:["Removed",D.STRING],labelFileRemoveError:["Error during remove",D.STRING],labelFileProcessing:["Uploading",D.STRING],labelFileProcessingComplete:["Upload complete",D.STRING],labelFileProcessingAborted:["Upload cancelled",D.STRING],labelFileProcessingError:["Error during upload",D.STRING],labelFileProcessingRevertError:["Error during revert",D.STRING],labelTapToCancel:["tap to cancel",D.STRING],labelTapToRetry:["tap to retry",D.STRING],labelTapToUndo:["tap to undo",D.STRING],labelButtonRemoveItem:["Remove",D.STRING],labelButtonAbortItemLoad:["Abort",D.STRING],labelButtonRetryItemLoad:["Retry",D.STRING],labelButtonAbortItemProcessing:["Cancel",D.STRING],labelButtonUndoItemProcessing:["Undo",D.STRING],labelButtonRetryItemProcessing:["Retry",D.STRING],labelButtonProcessItem:["Upload",D.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',D.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],oninit:[null,D.FUNCTION],onwarning:[null,D.FUNCTION],onerror:[null,D.FUNCTION],onactivatefile:[null,D.FUNCTION],oninitfile:[null,D.FUNCTION],onaddfilestart:[null,D.FUNCTION],onaddfileprogress:[null,D.FUNCTION],onaddfile:[null,D.FUNCTION],onprocessfilestart:[null,D.FUNCTION],onprocessfileprogress:[null,D.FUNCTION],onprocessfileabort:[null,D.FUNCTION],onprocessfilerevert:[null,D.FUNCTION],onprocessfile:[null,D.FUNCTION],onprocessfiles:[null,D.FUNCTION],onremovefile:[null,D.FUNCTION],onpreparefile:[null,D.FUNCTION],onupdatefiles:[null,D.FUNCTION],onreorderfiles:[null,D.FUNCTION],beforeDropFile:[null,D.FUNCTION],beforeAddFile:[null,D.FUNCTION],beforeRemoveFile:[null,D.FUNCTION],beforePrepareFile:[null,D.FUNCTION],stylePanelLayout:[null,D.STRING],stylePanelAspectRatio:[null,D.STRING],styleItemPanelAspectRatio:[null,D.STRING],styleButtonRemoveItemPosition:["left",D.STRING],styleButtonProcessItemPosition:["right",D.STRING],styleLoadIndicatorPosition:["right",D.STRING],styleProgressIndicatorPosition:["right",D.STRING],styleButtonRemoveItemAlign:[!1,D.BOOLEAN],files:[[],D.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],D.ARRAY]},Pe=(e,t)=>be(t)?e[0]||null:it(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),xs=e=>{if(be(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},me=e=>e.filter(t=>!t.archived),ml={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let It=null;const El=()=>{if(It===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,It=t.files.length===1}catch{It=!1}return It},gl=[G.LOAD_ERROR,G.PROCESSING_ERROR,G.PROCESSING_REVERT_ERROR],Il=[G.LOADING,G.PROCESSING,G.PROCESSING_QUEUED,G.INIT],_l=[G.PROCESSING_COMPLETE],Tl=e=>gl.includes(e.status),yl=e=>Il.includes(e.status),Rl=e=>_l.includes(e.status),Er=e=>X(e.options.server)&&(X(e.options.server.process)||Le(e.options.server.process)),Sl=e=>({GET_STATUS:()=>{const t=me(e.items),{EMPTY:n,ERROR:r,BUSY:s,IDLE:o,READY:i}=ml;return t.length===0?n:t.some(Tl)?r:t.some(yl)?s:t.some(Rl)?i:o},GET_ITEM:t=>Pe(e.items,t),GET_ACTIVE_ITEM:t=>Pe(me(e.items),t),GET_ACTIVE_ITEMS:()=>me(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=Pe(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=Pe(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:xs(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>me(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>me(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&El()&&!Er(e),IS_ASYNC:()=>Er(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),bl=e=>{const t=me(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Cs=(e,t,n)=>Math.max(Math.min(n,e),t),Ol=(e,t,n)=>e.splice(t,0,n),Dl=(e,t,n)=>be(t)?null:typeof n>"u"?(e.push(t),t):(n=Cs(n,0,e.length),Ol(e,n,t),t),En=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),ht=e=>`${e}`.split("/").pop().split("?").shift(),qt=e=>e.split(".").pop(),vl=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},at=(e,t="")=>(t+e).slice(-t.length),Ms=(e=new Date)=>`${e.getFullYear()}-${at(e.getMonth()+1,"00")}-${at(e.getDate(),"00")}_${at(e.getHours(),"00")}-${at(e.getMinutes(),"00")}-${at(e.getSeconds(),"00")}`,nt=(e,t,n=null,r=null)=>{const s=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),J(t)||(t=Ms()),t&&r===null&&qt(t)?s.name=t:(r=r||vl(s.type),s.name=t+(r?"."+r:"")),s},Al=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Ls=(e,t)=>{const n=Al();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},wl=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return Ls(n,t)},Ps=e=>(/^data:(.+);/.exec(e)||[])[1]||null,xl=e=>e.split(",")[1].replace(/\s/g,""),Cl=e=>atob(xl(e)),Ml=e=>{const t=Ps(e),n=Cl(e);return wl(n,t)},Ll=(e,t,n)=>nt(Ml(e),t,null,n),Pl=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Nl=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Fl=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Un=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const s=Pl(r);if(s){t.name=s;continue}const o=Nl(r);if(o){t.size=o;continue}const i=Fl(r);if(i){t.source=i;continue}}return t},Gl=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const l=t.source;i.fire("init",l),l instanceof File?i.fire("load",l):l instanceof Blob?i.fire("load",nt(l,l.name)):En(l)?i.fire("load",Ll(l)):o(l)},o=l=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,a=>{t.duration=Date.now()-t.timestamp,t.complete=!0,a instanceof Blob&&(a=nt(a,a.name||ht(l))),i.fire("load",a instanceof Blob?a:a?a.body:null)},a=>{i.fire("error",typeof a=="string"?{type:"error",code:0,body:a}:a)},(a,u,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!a){t.progress=null;return}t.progress=u/c,i.fire("progress",t.progress)},()=>{i.fire("abort")},a=>{const u=Un(typeof a=="string"?a:a.headers);i.fire("meta",{size:t.size||u.size,filename:u.name,source:u.source})})},i={...jt(),setSource:l=>t.source=l,getProgress:n,abort:r,load:s};return i},gr=e=>/GET|HEAD/.test(e),Fe=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,i.abort()}};let s=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),gr(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const i=new XMLHttpRequest,l=gr(n.method)?i:i.upload;return l.onprogress=a=>{s||r.onprogress(a.lengthComputable,a.loaded,a.total)},i.onreadystatechange=()=>{i.readyState<2||i.readyState===4&&i.status===0||o||(o=!0,r.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?r.onload(i):r.onerror(i)},i.onerror=()=>r.onerror(i),i.onabort=()=>{s=!0,r.onabort()},i.ontimeout=()=>r.ontimeout(i),i.open(n.method,t,!0),it(n.timeout)&&(i.timeout=n.timeout),Object.keys(n.headers).forEach(a=>{const u=unescape(encodeURIComponent(n.headers[a]));i.setRequestHeader(a,u)}),n.responseType&&(i.responseType=n.responseType),n.withCredentials&&(i.withCredentials=!0),i.send(e),r},q=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),Ge=e=>t=>{e(q("error",0,"Timeout",t.getAllResponseHeaders()))},Ir=e=>/\?/.test(e),ut=(...e)=>{let t="";return e.forEach(n=>{t+=Ir(t)&&Ir(n)?n.replace(/\?/,"&"):n}),t},en=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return null;const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i,l,a,u)=>{const c=Fe(s,ut(e,t.url),{...t,responseType:"blob"});return c.onload=d=>{const h=d.getAllResponseHeaders(),m=Un(h).name||ht(s);o(q("load",d.status,t.method==="HEAD"?null:nt(n(d.response),m),h))},c.onerror=d=>{i(q("error",d.status,r(d.response)||d.statusText,d.getAllResponseHeaders()))},c.onheaders=d=>{u(q("headers",d.status,null,d.getAllResponseHeaders()))},c.ontimeout=Ge(i),c.onprogress=l,c.onabort=a,c}},ce={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Ul=(e,t,n,r,s,o,i,l,a,u,c)=>{const d=[],{chunkTransferId:h,chunkServer:m,chunkSize:p,chunkRetryDelays:I}=c,_={serverId:h,aborted:!1},E=t.ondata||(A=>A),f=t.onload||((A,B)=>B==="HEAD"?A.getResponseHeader("Upload-Offset"):A.response),g=t.onerror||(A=>null),R=A=>{const B=new FormData;X(s)&&B.append(n,JSON.stringify(s));const O=typeof t.headers=="function"?t.headers(r,s):{...t.headers,"Upload-Length":r.size},x={...t,headers:O},P=Fe(E(B),ut(e,t.url),x);P.onload=F=>A(f(F,x.method)),P.onerror=F=>i(q("error",F.status,g(F.response)||F.statusText,F.getAllResponseHeaders())),P.ontimeout=Ge(i)},y=A=>{const B=ut(e,m.url,_.serverId),x={headers:typeof t.headers=="function"?t.headers(_.serverId):{...t.headers},method:"HEAD"},P=Fe(null,B,x);P.onload=F=>A(f(F,x.method)),P.onerror=F=>i(q("error",F.status,g(F.response)||F.statusText,F.getAllResponseHeaders())),P.ontimeout=Ge(i)},S=Math.floor(r.size/p);for(let A=0;A<=S;A++){const B=A*p,O=r.slice(B,B+p,"application/offset+octet-stream");d[A]={index:A,size:O.size,offset:B,data:O,file:r,progress:0,retries:[...I],status:ce.QUEUED,error:null,request:null,timeout:null}}const M=()=>o(_.serverId),b=A=>A.status===ce.QUEUED||A.status===ce.ERROR,w=A=>{if(_.aborted)return;if(A=A||d.find(b),!A){d.every(U=>U.status===ce.COMPLETE)&&M();return}A.status=ce.PROCESSING,A.progress=null;const B=m.ondata||(U=>U),O=m.onerror||(U=>null),x=m.onload||(()=>{}),P=ut(e,m.url,_.serverId),F=typeof m.headers=="function"?m.headers(A):{...m.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":A.offset,"Upload-Length":r.size,"Upload-Name":r.name},k=A.request=Fe(B(A.data),P,{...m,headers:F});k.onload=U=>{x(U,A.index,d.length),A.status=ce.COMPLETE,A.request=null,C()},k.onprogress=(U,xe,ot)=>{A.progress=U?xe:null,v()},k.onerror=U=>{A.status=ce.ERROR,A.request=null,A.error=O(U.response)||U.statusText,L(A)||i(q("error",U.status,O(U.response)||U.statusText,U.getAllResponseHeaders()))},k.ontimeout=U=>{A.status=ce.ERROR,A.request=null,L(A)||Ge(i)(U)},k.onabort=()=>{A.status=ce.QUEUED,A.request=null,a()}},L=A=>A.retries.length===0?!1:(A.status=ce.WAITING,clearTimeout(A.timeout),A.timeout=setTimeout(()=>{w(A)},A.retries.shift()),!0),v=()=>{const A=d.reduce((O,x)=>O===null||x.progress===null?null:O+x.progress,0);if(A===null)return l(!1,0,0);const B=d.reduce((O,x)=>O+x.size,0);l(!0,A,B)},C=()=>{d.filter(B=>B.status===ce.PROCESSING).length>=1||w()},V=()=>{d.forEach(A=>{clearTimeout(A.timeout),A.request&&A.request.abort()})};return _.serverId?y(A=>{_.aborted||(d.filter(B=>B.offset<A).forEach(B=>{B.status=ce.COMPLETE,B.progress=B.size}),C())}):R(A=>{_.aborted||(u(A),_.serverId=A,C())}),{abort:()=>{_.aborted=!0,V()}}},Vl=(e,t,n,r)=>(s,o,i,l,a,u,c)=>{if(!s)return;const d=r.chunkUploads,h=d&&s.size>r.chunkSize,m=d&&(h||r.chunkForce);if(s instanceof Blob&&m)return Ul(e,t,n,s,o,i,l,a,u,c,r);const p=t.ondata||(y=>y),I=t.onload||(y=>y),_=t.onerror||(y=>null),E=typeof t.headers=="function"?t.headers(s,o)||{}:{...t.headers},f={...t,headers:E};var g=new FormData;X(o)&&g.append(n,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(y=>{g.append(n,y.file,y.name===null?y.file.name:`${y.name}${y.file.name}`)});const R=Fe(p(g),ut(e,t.url),f);return R.onload=y=>{i(q("load",y.status,I(y.response),y.getAllResponseHeaders()))},R.onerror=y=>{l(q("error",y.status,_(y.response)||y.statusText,y.getAllResponseHeaders()))},R.ontimeout=Ge(l),R.onprogress=a,R.onabort=u,R},Bl=(e="",t,n,r)=>typeof t=="function"?(...s)=>t(n,...s,r):!t||!J(t.url)?null:Vl(e,t,n,r),lt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return(s,o)=>o();const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i)=>{const l=Fe(s,e+t.url,t);return l.onload=a=>{o(q("load",a.status,n(a.response),a.getAllResponseHeaders()))},l.onerror=a=>{i(q("error",a.status,r(a.response)||a.statusText,a.getAllResponseHeaders()))},l.ontimeout=Ge(i),l}},Ns=(e=0,t=1)=>e+Math.random()*(t-e),$l=(e,t=1e3,n=0,r=25,s=250)=>{let o=null;const i=Date.now(),l=()=>{let a=Date.now()-i,u=Ns(r,s);a+u>t&&(u=a+u-t);let c=a/t;if(c>=1||document.hidden){e(1);return}e(c),o=setTimeout(l,u)};return t>0&&l(),{clear:()=>{clearTimeout(o)}}},kl=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,s=(c,d)=>{const h=()=>{n.duration===0||n.progress===null||u.fire("progress",u.getProgress())},m=()=>{n.complete=!0,u.fire("load-perceived",n.response.body)};u.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=$l(p=>{n.perceivedProgress=p,n.perceivedDuration=Date.now()-n.timestamp,h(),n.response&&n.perceivedProgress===1&&!n.complete&&m()},r?Ns(750,1500):0),n.request=e(c,d,p=>{n.response=X(p)?p:{type:"load",code:200,body:`${p}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,u.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&m()},p=>{n.perceivedPerformanceUpdater.clear(),u.fire("error",X(p)?p:{type:"error",code:0,body:`${p}`})},(p,I,_)=>{n.duration=Date.now()-n.timestamp,n.progress=p?I/_:null,h()},()=>{n.perceivedPerformanceUpdater.clear(),u.fire("abort",n.response?n.response.body:null)},p=>{u.fire("transfer",p)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},i=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,a=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,u={...jt(),process:s,abort:o,getProgress:l,getDuration:a,reset:i};return u},Fs=e=>e.substring(0,e.lastIndexOf("."))||e,jl=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||En(e)?t[0]=e.name||Ms():En(e)?(t[1]=e.length,t[2]=Ps(e)):J(e)&&(t[0]=ht(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Ue=e=>!!(e instanceof File||e instanceof Blob&&e.name),Gs=e=>{if(!X(e))return e;const t=Bt(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&X(r)?Gs(r):r}return t},ql=(e=null,t=null,n=null)=>{const r=Nn(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?G.PROCESSING_COMPLETE:G.INIT,activeLoader:null,activeProcessor:null};let o=null;const i={},l=b=>s.status=b,a=(b,...w)=>{s.released||s.frozen||S.fire(b,...w)},u=()=>qt(s.file.name),c=()=>s.file.type,d=()=>s.file.size,h=()=>s.file,m=(b,w,L)=>{if(s.source=b,S.fireSync("init"),s.file){S.fireSync("load-skip");return}s.file=jl(b),w.on("init",()=>{a("load-init")}),w.on("meta",v=>{s.file.size=v.size,s.file.filename=v.filename,v.source&&(e=Y.LIMBO,s.serverFileReference=v.source,s.status=G.PROCESSING_COMPLETE),a("load-meta")}),w.on("progress",v=>{l(G.LOADING),a("load-progress",v)}),w.on("error",v=>{l(G.LOAD_ERROR),a("load-request-error",v)}),w.on("abort",()=>{l(G.INIT),a("load-abort")}),w.on("load",v=>{s.activeLoader=null;const C=A=>{s.file=Ue(A)?A:s.file,e===Y.LIMBO&&s.serverFileReference?l(G.PROCESSING_COMPLETE):l(G.IDLE),a("load")},V=A=>{s.file=v,a("load-meta"),l(G.LOAD_ERROR),a("load-file-error",A)};if(s.serverFileReference){C(v);return}L(v,C,V)}),w.setSource(b),s.activeLoader=w,w.load()},p=()=>{s.activeLoader&&s.activeLoader.load()},I=()=>{if(s.activeLoader){s.activeLoader.abort();return}l(G.INIT),a("load-abort")},_=(b,w)=>{if(s.processingAborted){s.processingAborted=!1;return}if(l(G.PROCESSING),o=null,!(s.file instanceof Blob)){S.on("load",()=>{_(b,w)});return}b.on("load",C=>{s.transferId=null,s.serverFileReference=C}),b.on("transfer",C=>{s.transferId=C}),b.on("load-perceived",C=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=C,l(G.PROCESSING_COMPLETE),a("process-complete",C)}),b.on("start",()=>{a("process-start")}),b.on("error",C=>{s.activeProcessor=null,l(G.PROCESSING_ERROR),a("process-error",C)}),b.on("abort",C=>{s.activeProcessor=null,s.serverFileReference=C,l(G.IDLE),a("process-abort"),o&&o()}),b.on("progress",C=>{a("process-progress",C)});const L=C=>{s.archived||b.process(C,{...i})},v=console.error;w(s.file,L,v),s.activeProcessor=b},E=()=>{s.processingAborted=!1,l(G.PROCESSING_QUEUED)},f=()=>new Promise(b=>{if(!s.activeProcessor){s.processingAborted=!0,l(G.IDLE),a("process-abort"),b();return}o=()=>{b()},s.activeProcessor.abort()}),g=(b,w)=>new Promise((L,v)=>{const C=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(C===null){L();return}b(C,()=>{s.serverFileReference=null,s.transferId=null,L()},V=>{if(!w){L();return}l(G.PROCESSING_REVERT_ERROR),a("process-revert-error"),v(V)}),l(G.IDLE),a("process-revert")}),R=(b,w,L)=>{const v=b.split("."),C=v[0],V=v.pop();let A=i;v.forEach(B=>A=A[B]),JSON.stringify(A[V])!==JSON.stringify(w)&&(A[V]=w,a("metadata-update",{key:C,value:i[C],silent:L}))},S={id:{get:()=>r},origin:{get:()=>e,set:b=>e=b},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>Fs(s.file.name)},fileExtension:{get:u},fileType:{get:c},fileSize:{get:d},file:{get:h},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:b=>Gs(b?i[b]:i),setMetadata:(b,w,L)=>{if(X(b)){const v=b;return Object.keys(v).forEach(C=>{R(C,v[C],w)}),b}return R(b,w,L),w},extend:(b,w)=>M[b]=w,abortLoad:I,retryLoad:p,requestProcessing:E,abortProcessing:f,load:m,process:_,revert:g,...jt(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived},setFile:b=>s.file=b},M=we(S);return M},zl=(e,t)=>be(t)?0:J(t)?e.findIndex(n=>n.id===t):-1,_r=(e,t)=>{const n=zl(e,t);if(!(n<0))return e[n]||null},Tr=(e,t,n,r,s,o)=>{const i=Fe(null,e,{method:"GET",responseType:"blob"});return i.onload=l=>{const a=l.getAllResponseHeaders(),u=Un(a).name||ht(e);t(q("load",l.status,nt(l.response,u),a))},i.onerror=l=>{n(q("error",l.status,l.statusText,l.getAllResponseHeaders()))},i.onheaders=l=>{o(q("headers",l.status,null,l.getAllResponseHeaders()))},i.ontimeout=Ge(n),i.onprogress=r,i.onabort=s,i},yr=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Hl=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&yr(location.href)!==yr(e),_t=e=>(...t)=>Le(e)?e(...t):e,Wl=e=>!Ue(e.file),tn=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:me(t.items)})},0)},Rr=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),nn=(e,t)=>{e.items.sort((n,r)=>t(se(n),se(r)))},ue=(e,t)=>({query:n,success:r=()=>{},failure:s=()=>{},...o}={})=>{const i=Pe(e.items,n);if(!i){s({error:q("error",0,"Item not found"),file:null});return}t(i,r,s,o||{})},Yl=(e,t,n)=>({ABORT_ALL:()=>{me(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const s=r.map(i=>({source:i.source?i.source:i,options:i.options}));let o=me(n.items);o.forEach(i=>{s.find(l=>l.source===i.source||l.source===i.file)||e("REMOVE_ITEM",{query:i,remove:!1})}),o=me(n.items),s.forEach((i,l)=>{o.find(a=>a.source===i.source||a.file===i.source)||e("ADD_ITEM",{...i,interactionMethod:fe.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:r,action:s,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const i=_r(n.items,r);if(!t("IS_ASYNC")){he("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:t,action:s,change:o}).then(c=>{const d=t("GET_BEFORE_PREPARE_FILE");d&&(c=d(i,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:i,success:h=>{e("DID_PREPARE_OUTPUT",{id:r,file:h})}},!0)});return}i.origin===Y.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},a=c=>{i.revert(lt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c?l:()=>{}).catch(()=>{})},u=c=>{i.abortProcessing().then(c?l:()=>{})};if(i.status===G.PROCESSING_COMPLETE)return a(n.options.instantUpload);if(i.status===G.PROCESSING)return u(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:s})=>{const o=Pe(n.items,r);if(!o)return;const i=n.items.indexOf(o);s=Cs(s,0,n.items.length-1),i!==s&&n.items.splice(s,0,n.items.splice(i,1)[0])},SORT:({compare:r})=>{nn(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:s,interactionMethod:o,success:i=()=>{},failure:l=()=>{}})=>{let a=s;if(s===-1||typeof s>"u"){const m=t("GET_ITEM_INSERT_LOCATION"),p=t("GET_TOTAL_ITEMS");a=m==="before"?0:p}const u=t("GET_IGNORED_FILES"),c=m=>Ue(m)?!u.includes(m.name.toLowerCase()):!be(m),h=r.filter(c).map(m=>new Promise((p,I)=>{e("ADD_ITEM",{interactionMethod:o,source:m.source||m,success:p,failure:I,index:a++,options:m.options||{}})}));Promise.all(h).then(i).catch(l)},ADD_ITEM:({source:r,index:s=-1,interactionMethod:o,success:i=()=>{},failure:l=()=>{},options:a={}})=>{if(be(r)){l({error:q("error",0,"No source"),file:null});return}if(Ue(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!bl(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const f=q("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:f}),l({error:f,file:null});return}const E=me(n.items)[0];if(E.status===G.PROCESSING_COMPLETE||E.status===G.PROCESSING_REVERT_ERROR){const f=t("GET_FORCE_REVERT");if(E.revert(lt(n.options.server.url,n.options.server.revert),f).then(()=>{f&&e("ADD_ITEM",{source:r,index:s,interactionMethod:o,success:i,failure:l,options:a})}).catch(()=>{}),f)return}e("REMOVE_ITEM",{query:E.id})}const u=a.type==="local"?Y.LOCAL:a.type==="limbo"?Y.LIMBO:Y.INPUT,c=ql(u,u===Y.INPUT?null:r,a.file);Object.keys(a.metadata||{}).forEach(E=>{c.setMetadata(E,a.metadata[E])}),He("DID_CREATE_ITEM",c,{query:t,dispatch:e});const d=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=d==="before"?-1:n.items.length),Dl(n.items,c,s),Le(d)&&r&&nn(n,d);const h=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:h})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:h})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:h})}),c.on("load-progress",E=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:h,progress:E})}),c.on("load-request-error",E=>{const f=_t(n.options.labelFileLoadError)(E);if(E.code>=400&&E.code<500){e("DID_THROW_ITEM_INVALID",{id:h,error:E,status:{main:f,sub:`${E.code} (${E.body})`}}),l({error:E,file:se(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:h,error:E,status:{main:f,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",E=>{e("DID_THROW_ITEM_INVALID",{id:h,error:E.status,status:E.status}),l({error:E.status,file:se(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:h})}),c.on("load-skip",()=>{c.on("metadata-update",E=>{Ue(c.file)&&e("DID_UPDATE_ITEM_METADATA",{id:h,change:E})}),e("COMPLETE_LOAD_ITEM",{query:h,item:c,data:{source:r,success:i}})}),c.on("load",()=>{const E=f=>{if(!f){e("REMOVE_ITEM",{query:h});return}c.on("metadata-update",g=>{e("DID_UPDATE_ITEM_METADATA",{id:h,change:g})}),he("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(g=>{const R=t("GET_BEFORE_PREPARE_FILE");R&&(g=R(c,g));const y=()=>{e("COMPLETE_LOAD_ITEM",{query:h,item:c,data:{source:r,success:i}}),tn(e,n)};if(g){e("REQUEST_PREPARE_OUTPUT",{query:h,item:c,success:S=>{e("DID_PREPARE_OUTPUT",{id:h,file:S}),y()}},!0);return}y()})};he("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{Rr(t("GET_BEFORE_ADD_FILE"),se(c)).then(E)}).catch(f=>{if(!f||!f.error||!f.status)return E(!1);e("DID_THROW_ITEM_INVALID",{id:h,error:f.error,status:f.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:h})}),c.on("process-progress",E=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:h,progress:E})}),c.on("process-error",E=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:h,error:E,status:{main:_t(n.options.labelFileProcessingError)(E),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",E=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:h,error:E,status:{main:_t(n.options.labelFileProcessingRevertError)(E),sub:n.options.labelTapToRetry}})}),c.on("process-complete",E=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:h,error:null,serverFileReference:E}),e("DID_DEFINE_VALUE",{id:h,value:E})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:h})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:h}),e("DID_DEFINE_VALUE",{id:h,value:null})}),e("DID_ADD_ITEM",{id:h,index:s,interactionMethod:o}),tn(e,n);const{url:m,load:p,restore:I,fetch:_}=n.options.server||{};c.load(r,Gl(u===Y.INPUT?J(r)&&Hl(r)&&_?en(m,_):Tr:u===Y.LIMBO?en(m,I):en(m,p)),(E,f,g)=>{he("LOAD_FILE",E,{query:t}).then(f).catch(g)})},REQUEST_PREPARE_OUTPUT:({item:r,success:s,failure:o=()=>{}})=>{const i={error:q("error",0,"Item not found"),file:null};if(r.archived)return o(i);he("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(l=>{he("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:r}).then(a=>{if(r.archived)return o(i);s(a)})})},COMPLETE_LOAD_ITEM:({item:r,data:s})=>{const{success:o,source:i}=s,l=t("GET_ITEM_INSERT_LOCATION");if(Le(l)&&i&&nn(n,l),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Y.INPUT?null:i}),o(se(r)),r.origin===Y.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Y.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:i}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||i});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:ue(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:ue(n,(r,s,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:i=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:i}),s({file:r,output:i})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:ue(n,(r,s,o)=>{if(!(r.status===G.IDLE||r.status===G.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:s,failure:o}),a=()=>document.hidden?l():setTimeout(l,32);r.status===G.PROCESSING_COMPLETE||r.status===G.PROCESSING_REVERT_ERROR?r.revert(lt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch(()=>{}):r.status===G.PROCESSING&&r.abortProcessing().then(a);return}r.status!==G.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:s,failure:o},!0))}),PROCESS_ITEM:ue(n,(r,s,o)=>{const i=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",G.PROCESSING).length===i){n.processingQueue.push({id:r.id,success:s,failure:o});return}if(r.status===G.PROCESSING)return;const a=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:d,success:h,failure:m}=c,p=Pe(n.items,d);if(!p||p.archived){a();return}e("PROCESS_ITEM",{query:d,success:h,failure:m},!0)};r.onOnce("process-complete",()=>{s(se(r)),a();const c=n.options.server;if(n.options.instantUpload&&r.origin===Y.LOCAL&&Le(c.remove)){const m=()=>{};r.origin=Y.LIMBO,n.options.server.remove(r.source,m,m)}t("GET_ITEMS_BY_STATUS",G.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",c=>{o({error:c,file:se(r)}),a()});const u=n.options;r.process(kl(Bl(u.server.url,u.server.process,u.name,{chunkTransferId:r.transferId,chunkServer:u.server.patch,chunkUploads:u.chunkUploads,chunkForce:u.chunkForce,chunkSize:u.chunkSize,chunkRetryDelays:u.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,d,h)=>{he("PREPARE_OUTPUT",c,{query:t,item:r}).then(m=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:m}),d(m)}).catch(h)})}),RETRY_ITEM_PROCESSING:ue(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:ue(n,r=>{Rr(t("GET_BEFORE_REMOVE_FILE"),se(r)).then(s=>{s&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:ue(n,r=>{r.release()}),REMOVE_ITEM:ue(n,(r,s,o,i)=>{const l=()=>{const u=r.id;_r(n.items,u).archive(),e("DID_REMOVE_ITEM",{error:null,id:u,item:r}),tn(e,n),s(se(r))},a=n.options.server;r.origin===Y.LOCAL&&a&&Le(a.remove)&&i.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),a.remove(r.source,()=>l(),u=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:q("error",0,u,null),status:{main:_t(n.options.labelFileRemoveError)(u),sub:n.options.labelTapToRetry}})})):((i.revert&&r.origin!==Y.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(lt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:ue(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:ue(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ue(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const s=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:r})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const i=o(se(r));if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),REVERT_ITEM_PROCESSING:ue(n,r=>{r.revert(lt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Wl(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const s=Object.keys(r),o=Xl.filter(l=>s.includes(l));[...o,...Object.keys(r).filter(l=>!o.includes(l))].forEach(l=>{e(`SET_${kt(l,"_").toUpperCase()}`,{value:r[l]})})}}),Xl=["server"],Vn=e=>e,Oe=e=>document.createElement(e),z=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Sr=(e,t,n,r)=>{const s=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},Zl=(e,t,n,r,s,o)=>{const i=Sr(e,t,n,s),l=Sr(e,t,n,r);return["M",i.x,i.y,"A",n,n,0,o,0,l.x,l.y].join(" ")},Ql=(e,t,n,r,s)=>{let o=1;return s>r&&s-r<=.5&&(o=0),r>s&&r-s>=.5&&(o=0),Zl(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,s)*360,o)},Kl=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=Mt("svg");e.ref.path=Mt("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Jl=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(W(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let s=0,o=0;t.spin?(s=0,o=.5):(s=0,o=t.progress);const i=Ql(r,r,r-n,s,o);W(e.ref.path,"d",i),W(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},br=H({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Kl,write:Jl,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ec=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},tc=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,W(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Us=H({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:ec,write:tc}),Vs=(e,t=".",n=1e3,r={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:i="MB",labelGigabytes:l="GB"}=r;e=Math.round(Math.abs(e));const a=n,u=n*n,c=n*n*n;return e<a?`${e} ${s}`:e<u?`${Math.floor(e/a)} ${o}`:e<c?`${Or(e/u,1,t)} ${i}`:`${Or(e/c,2,t)} ${l}`},Or=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),nc=({root:e,props:t})=>{const n=Oe("span");n.className="filepond--file-info-main",W(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Oe("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,z(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),z(n,Vn(e.query("GET_ITEM_NAME",t.id)))},gn=({root:e,props:t})=>{z(e.ref.fileSize,Vs(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),z(e.ref.fileName,Vn(e.query("GET_ITEM_NAME",t.id)))},Dr=({root:e,props:t})=>{if(it(e.query("GET_ITEM_SIZE",t.id))){gn({root:e,props:t});return}z(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},rc=H({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:te({DID_LOAD_ITEM:gn,DID_UPDATE_ITEM_META:gn,DID_THROW_ITEM_LOAD_ERROR:Dr,DID_THROW_ITEM_INVALID:Dr}),didCreateView:e=>{He("CREATE_VIEW",{...e,view:e})},create:nc,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Bs=e=>Math.round(e*100),sc=({root:e})=>{const t=Oe("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Oe("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,$s({root:e,action:{progress:null}})},$s=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Bs(t.progress)}%`;z(e.ref.main,n),z(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ic=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Bs(t.progress)}%`;z(e.ref.main,n),z(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},oc=({root:e})=>{z(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),z(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ac=({root:e})=>{z(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),z(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},lc=({root:e})=>{z(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),z(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},vr=({root:e})=>{z(e.ref.main,""),z(e.ref.sub,"")},ct=({root:e,action:t})=>{z(e.ref.main,t.status.main),z(e.ref.sub,t.status.sub)},cc=H({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:te({DID_LOAD_ITEM:vr,DID_REVERT_ITEM_PROCESSING:vr,DID_REQUEST_ITEM_PROCESSING:oc,DID_ABORT_ITEM_PROCESSING:ac,DID_COMPLETE_ITEM_PROCESSING:lc,DID_UPDATE_ITEM_PROCESS_PROGRESS:ic,DID_UPDATE_ITEM_LOAD_PROGRESS:$s,DID_THROW_ITEM_LOAD_ERROR:ct,DID_THROW_ITEM_INVALID:ct,DID_THROW_ITEM_PROCESSING_ERROR:ct,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:ct,DID_THROW_ITEM_REMOVE_ERROR:ct}),didCreateView:e=>{He("CREATE_VIEW",{...e,view:e})},create:sc,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),In={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},_n=[];j(In,e=>{_n.push(e)});const ae=e=>{if(Tn(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},uc=e=>e.ref.buttonAbortItemLoad.rect.element.width,Tt=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),dc=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),fc=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),pc=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Tn=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),hc={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:fc},processProgressIndicator:{opacity:0,align:pc},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ar={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ae},status:{translateX:ae}},rn={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Je={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{translateX:ae,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Tn},info:{translateX:ae},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Tn},buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{opacity:1,translateX:ae}},DID_LOAD_ITEM:Ar,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{translateX:ae}},DID_START_ITEM_PROCESSING:rn,DID_REQUEST_ITEM_PROCESSING:rn,DID_UPDATE_ITEM_PROCESS_PROGRESS:rn,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ae}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ae},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ar},mc=H({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Ec=({root:e,props:t})=>{const n=Object.keys(In).reduce((p,I)=>(p[I]={...In[I]},p),{}),{id:r}=t,s=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),i=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),a=e.query("IS_ASYNC"),u=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;a?i&&!s?c=p=>!/RevertItemProcessing/.test(p):!i&&s?c=p=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(p):!i&&!s&&(c=p=>!/Process/.test(p)):c=p=>!/Process/.test(p);const d=c?_n.filter(c):_n.concat();if(l&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),a&&!s){const p=Je.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=dc,p.info.translateY=Tt,p.status.translateY=Tt,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(a&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(p=>{Je[p].status.translateY=Tt}),Je.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=uc),u&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const p=Je.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=ae,p.status.translateY=Tt,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),j(n,(p,I)=>{const _=e.createChildView(Us,{label:e.query(I.label),icon:e.query(I.icon),opacity:0});d.includes(p)&&e.appendChildView(_),I.disabled&&(_.element.setAttribute("disabled","disabled"),_.element.setAttribute("hidden","hidden")),_.element.dataset.align=e.query(`GET_STYLE_${I.align}`),_.element.classList.add(I.className),_.on("click",E=>{E.stopPropagation(),!I.disabled&&e.dispatch(I.action,{query:r})}),e.ref[`button${p}`]=_}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(mc)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(rc,{id:r})),e.ref.status=e.appendChildView(e.createChildView(cc,{id:r}));const h=e.appendChildView(e.createChildView(br,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));h.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=h;const m=e.appendChildView(e.createChildView(br,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=m,e.ref.activeStyles=[]},gc=({root:e,actions:t,props:n})=>{Ic({root:e,actions:t,props:n});let r=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Je[s.type]);if(r){e.ref.activeStyles=[];const s=Je[r.type];j(hc,(o,i)=>{const l=e.ref[o];j(i,(a,u)=>{const c=s[o]&&typeof s[o][a]<"u"?s[o][a]:u;e.ref.activeStyles.push({control:l,key:a,value:c})})})}e.ref.activeStyles.forEach(({control:s,key:o,value:i})=>{s[o]=typeof i=="function"?i(e):i})},Ic=te({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),_c=H({create:Ec,write:gc,didCreateView:e=>{He("CREATE_VIEW",{...e,view:e})},name:"file"}),Tc=({root:e,props:t})=>{e.ref.fileName=Oe("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(_c,{id:t.id})),e.ref.data=!1},yc=({root:e,props:t})=>{z(e.ref.fileName,Vn(e.query("GET_ITEM_NAME",t.id)))},Rc=H({create:Tc,ignoreRect:!0,write:te({DID_LOAD_ITEM:yc}),didCreateView:e=>{He("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),wr={type:"spring",damping:.6,mass:7},Sc=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:wr},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:wr},styles:["translateY"]}}].forEach(n=>{bc(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},bc=(e,t,n)=>{const r=H({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(s)},Oc=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Ss(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,s=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(s-n.height-r.height)/100,e.ref.bottom.translateY=s-r.height},ks=H({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:Oc,create:Sc,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Dc=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},xr={type:"spring",stiffness:.75,damping:.45,mass:10},Cr="spring",Mr={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},vc=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Rc,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(ks,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let s=!1;const o={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const i=Dc(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:i});const l=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),t.dragOffset={x:d.pageX-o.x,y:d.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:i})},a=d=>{d.isPrimary&&(t.dragOffset={x:d.pageX-o.x,y:d.pageY-o.y},c())},u=()=>{c()},c=()=>{document.removeEventListener("pointercancel",u),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",a),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:i}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",u),document.addEventListener("pointermove",l),document.addEventListener("pointerup",a)};e.element.addEventListener("pointerdown",n)},Ac=te({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),wc=te({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Mr[i.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,e.element.dataset.filepondItemState=Mr[n.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?r||(e.height=e.rect.element.width*o):(Ac({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),xc=H({create:vc,write:wc,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Cr,scaleY:Cr,translateX:xr,translateY:xr,opacity:{type:"tween",duration:150}}}});var Bn=(e,t)=>Math.max(1,Math.floor((e+1)/t));const $n=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,s=t.length;let o=null;if(s===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,a=l.marginLeft+l.marginRight,u=l.width+a,c=Bn(r,u);if(c===1){for(let m=0;m<s;m++){const p=t[m],I=p.rect.outer.top+p.rect.element.height*.5;if(n.top<I)return m}return s}const d=l.marginTop+l.marginBottom,h=l.height+d;for(let m=0;m<s;m++){const p=m%c,I=Math.floor(m/c),_=p*u,E=I*h,f=E-l.marginTop,g=_+u,R=E+h+l.marginBottom;if(n.top<R&&n.top>f){if(n.left<g)return m;m!==s-1?o=m:o=null}}return o!==null?o:s},yt={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)}},Cc=({root:e})=>{W(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Mc=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:s}=t;e.ref.addIndex=r;const o=Date.now();let i=o,l=1;if(s!==fe.NONE){l=0;const a=e.query("GET_ITEM_INSERT_INTERVAL"),u=o-e.ref.lastItemSpanwDate;i=u<a?o+(a-u):o}e.ref.lastItemSpanwDate=i,e.appendChildView(e.createChildView(xc,{spawnDate:i,id:n,opacity:l,interactionMethod:s}),r)},Lr=(e,t,n,r=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Lc(e,t,n,r,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},Lc=(e,t,n,r,s)=>{e.interactionMethod===fe.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===fe.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===fe.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===fe.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Pc=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(s=>s.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},sn=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,Nc=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Fc=({root:e,action:t})=>{const{id:n,dragState:r}=t,s=e.query("GET_ITEM",{id:n}),o=e.childViews.find(_=>_.id===n),i=e.childViews.length,l=r.getItemIndex(s);if(!o)return;const a={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},u=sn(o),c=Nc(o);let d=Math.floor(e.rect.outer.width/c);d>i&&(d=i);const h=Math.floor(i/d+1);yt.setHeight=u*h,yt.setWidth=c*d;var m={y:Math.floor(a.y/u),x:Math.floor(a.x/c),getGridIndex:function(){return a.y>yt.getHeight||a.y<0||a.x>yt.getWidth||a.x<0?l:this.y*d+this.x},getColIndex:function(){const E=e.query("GET_ACTIVE_ITEMS"),f=e.childViews.filter(v=>v.rect.element.height),g=E.map(v=>f.find(C=>C.id===v.id)),R=g.findIndex(v=>v===o),y=sn(o),S=g.length;let M=S,b=0,w=0,L=0;for(let v=0;v<S;v++)if(b=sn(g[v]),L=w,w=L+b,a.y<w){if(R>v){if(a.y<L+y){M=v;break}continue}M=v;break}return M}};const p=d>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:p});const I=r.getIndex();if(I===void 0||I!==p){if(r.setIndex(p),I===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:p})}},Gc=te({DID_ADD_ITEM:Mc,DID_REMOVE_ITEM:Pc,DID_DRAG_ITEM:Fc}),Uc=({root:e,props:t,actions:n,shouldOptimize:r})=>{Gc({root:e,props:t,actions:n});const{dragCoordinates:s}=t,o=e.rect.element.width,i=e.childViews.filter(g=>g.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(g=>i.find(R=>R.id===g.id)).filter(g=>g),a=s?$n(e,l,s):null,u=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,d=0,h=0;if(l.length===0)return;const m=l[0].rect.element,p=m.marginTop+m.marginBottom,I=m.marginLeft+m.marginRight,_=m.width+I,E=m.height+p,f=Bn(o,_);if(f===1){let g=0,R=0;l.forEach((y,S)=>{if(a){let w=S-a;w===-2?R=-p*.25:w===-1?R=-p*.75:w===0?R=p*.75:w===1?R=p*.25:R=0}r&&(y.translateX=null,y.translateY=null),y.markedForRemoval||Lr(y,0,g+R);let b=(y.rect.element.height+p)*(y.markedForRemoval?y.opacity:1);g+=b})}else{let g=0,R=0;l.forEach((y,S)=>{S===a&&(c=1),S===u&&(h+=1),y.markedForRemoval&&y.opacity<.5&&(d-=1);const M=S+h+c+d,b=M%f,w=Math.floor(M/f),L=b*_,v=w*E,C=Math.sign(L-g),V=Math.sign(v-R);g=L,R=v,!y.markedForRemoval&&(r&&(y.translateX=null,y.translateY=null),Lr(y,L,v,C,V))})}},Vc=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Bc=H({create:Cc,write:Uc,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Vc,mixins:{apis:["dragCoordinates"]}}),$c=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Bc)),t.dragCoordinates=null,t.overflowing=!1},kc=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},jc=({props:e})=>{e.dragCoordinates=null},qc=te({DID_DRAG:kc,DID_END_DRAG:jc}),zc=({root:e,props:t,actions:n})=>{if(qc({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Hc=H({create:$c,write:zc,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ee=(e,t,n,r="")=>{n?W(e,t,r):e.removeAttribute(t)},Wc=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Oe("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Yc=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,W(e.element,"name",e.query("GET_NAME")),W(e.element,"aria-controls",`filepond--assistant-${t.id}`),W(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),js({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),qs({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),zs({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),yn({root:e}),Hs({root:e,action:{value:e.query("GET_REQUIRED")}}),Ws({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(r),Wc(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},js=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Ee(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},qs=({root:e,action:t})=>{Ee(e.element,"multiple",t.value)},zs=({root:e,action:t})=>{Ee(e.element,"webkitdirectory",t.value)},yn=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Ee(e.element,"disabled",r)},Hs=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Ee(e.element,"required",!0):Ee(e.element,"required",!1)},Ws=({root:e,action:t})=>{Ee(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Pr=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0){Ee(t,"required",!1),Ee(t,"name",!1);const n=e.query("GET_ACTIVE_ITEMS");let r=!1;for(let s=0;s<n.length;s++)n[s].status===G.LOAD_ERROR&&(r=!0);e.element.setCustomValidity(r?e.query("GET_LABEL_INVALID_FIELD"):"")}else Ee(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Ee(t,"required",!0)},Xc=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Zc=H({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Yc,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:te({DID_LOAD_ITEM:Pr,DID_REMOVE_ITEM:Pr,DID_THROW_ITEM_INVALID:Xc,DID_SET_DISABLED:yn,DID_SET_ALLOW_BROWSE:yn,DID_SET_ALLOW_DIRECTORIES_ONLY:zs,DID_SET_ALLOW_MULTIPLE:qs,DID_SET_ACCEPTED_FILE_TYPES:js,DID_SET_CAPTURE_METHOD:Ws,DID_SET_REQUIRED:Hs})}),Nr={ENTER:13,SPACE:32},Qc=({root:e,props:t})=>{const n=Oe("label");W(n,"for",`filepond--browser-${t.id}`),W(n,"id",`filepond--drop-label-${t.id}`),e.ref.handleKeyDown=r=>{(r.keyCode===Nr.ENTER||r.keyCode===Nr.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Ys(n,t.caption),e.appendChild(n),e.ref.label=n},Ys=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&W(n,"tabindex","0"),t},Kc=H({name:"drop-label",ignoreRect:!0,create:Qc,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:te({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Ys(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Jc=H({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),eu=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Jc,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},tu=({root:e,action:t})=>{if(!e.ref.blob){eu({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},nu=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},ru=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},su=({root:e,props:t,actions:n})=>{iu({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},iu=te({DID_DRAG:tu,DID_DROP:ru,DID_END_DRAG:nu}),ou=H({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:su}),Xs=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},au=({root:e})=>{e.ref.fields={};const t=document.createElement("legend");t.textContent="Files",e.element.appendChild(t)},zt=(e,t)=>e.ref.fields[t],kn=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Fr=({root:e})=>kn(e),lu=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===Y.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=Oe("input");o.type=s?"file":"hidden",o.name=e.query("GET_NAME"),e.ref.fields[t.id]=o,kn(e)},cu=({root:e,action:t})=>{const n=zt(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Xs(n,[r.file])},uu=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=zt(e,t.id);n&&Xs(n,[t.file])},0)},du=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},fu=({root:e,action:t})=>{const n=zt(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},pu=({root:e,action:t})=>{const n=zt(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),kn(e))},hu=te({DID_SET_DISABLED:du,DID_ADD_ITEM:lu,DID_LOAD_ITEM:cu,DID_REMOVE_ITEM:fu,DID_DEFINE_VALUE:pu,DID_PREPARE_OUTPUT:uu,DID_REORDER_ITEMS:Fr,DID_SORT_ITEMS:Fr}),mu=H({tag:"fieldset",name:"data",create:au,write:hu,ignoreRect:!0}),Eu=e=>"getRootNode"in e?e.getRootNode():document,gu=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Iu=["css","csv","html","txt"],_u={zip:"zip|compressed",epub:"application/epub+zip"},Zs=(e="")=>(e=e.toLowerCase(),gu.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Iu.includes(e)?"text/"+e:_u[e]||""),jn=e=>new Promise((t,n)=>{const r=vu(e);if(r.length&&!Tu(e))return t(r);yu(e).then(t)}),Tu=e=>e.files?e.files.length>0:!1,yu=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(s=>Ru(s)).map(s=>Su(s));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(s=>{const o=[];s.forEach(i=>{o.push.apply(o,i)}),t(o.filter(i=>i).map(i=>(i._relativePath||(i._relativePath=i.webkitRelativePath),i)))}).catch(console.error)}),Ru=e=>{if(Qs(e)){const t=qn(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},Su=e=>new Promise((t,n)=>{if(Du(e)){bu(qn(e)).then(t).catch(n);return}t([e.getAsFile()])}),bu=e=>new Promise((t,n)=>{const r=[];let s=0,o=0;const i=()=>{o===0&&s===0&&t(r)},l=a=>{s++;const u=a.createReader(),c=()=>{u.readEntries(d=>{if(d.length===0){s--,i();return}d.forEach(h=>{h.isDirectory?l(h):(o++,h.file(m=>{const p=Ou(m);h.fullPath&&(p._relativePath=h.fullPath),r.push(p),o--,i()}))}),c()},n)};c()};l(e)}),Ou=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=Zs(qt(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},Du=e=>Qs(e)&&(qn(e)||{}).isDirectory,Qs=e=>"webkitGetAsEntry"in e,qn=e=>e.webkitGetAsEntry(),vu=e=>{let t=[];try{if(t=wu(e),t.length)return t;t=Au(e)}catch{}return t},Au=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},wu=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Pt=[],Ve=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),xu=(e,t,n)=>{const r=Cu(t),s={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=r.addListener(s),s},Cu=e=>{const t=Pt.find(r=>r.element===e);if(t)return t;const n=Mu(e);return Pt.push(n),n},Mu=e=>{const t=[],n={dragenter:Pu,dragover:Nu,dragleave:Gu,drop:Fu},r={};j(n,(o,i)=>{r[o]=i(e,t),e.addEventListener(o,r[o],!1)});const s={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(Pt.splice(Pt.indexOf(s),1),j(n,i=>{e.removeEventListener(i,r[i],!1)}))})};return s},Lu=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),zn=(e,t)=>{const n=Eu(t),r=Lu(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let Ks=null;const Rt=(e,t)=>{try{e.dropEffect=t}catch{}},Pu=(e,t)=>n=>{n.preventDefault(),Ks=n.target,t.forEach(r=>{const{element:s,onenter:o}=r;zn(n,s)&&(r.state="enter",o(Ve(n)))})},Nu=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;jn(r).then(s=>{let o=!1;t.some(i=>{const{filterElement:l,element:a,onenter:u,onexit:c,ondrag:d,allowdrop:h}=i;Rt(r,"copy");const m=h(s);if(!m){Rt(r,"none");return}if(zn(n,a)){if(o=!0,i.state===null){i.state="enter",u(Ve(n));return}if(i.state="over",l&&!m){Rt(r,"none");return}d(Ve(n))}else l&&!o&&Rt(r,"none"),i.state&&(i.state=null,c(Ve(n)))})})},Fu=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;jn(r).then(s=>{t.forEach(o=>{const{filterElement:i,element:l,ondrop:a,onexit:u,allowdrop:c}=o;if(o.state=null,!(i&&!zn(n,l))){if(!c(s))return u(Ve(n));a(Ve(n),s)}})})},Gu=(e,t)=>n=>{Ks===n.target&&t.forEach(r=>{const{onexit:s}=r;r.state=null,s(Ve(n))})},Uu=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:s,filterItems:o=c=>c}=n,i=xu(e,r?document.documentElement:e,s);let l="",a="";i.allowdrop=c=>t(o(c)),i.ondrop=(c,d)=>{const h=o(d);if(!t(h)){u.ondragend(c);return}a="drag-drop",u.onload(h,c)},i.ondrag=c=>{u.ondrag(c)},i.onenter=c=>{a="drag-over",u.ondragstart(c)},i.onexit=c=>{a="drag-exit",u.ondragend(c)};const u={updateHopperState:()=>{l!==a&&(e.dataset.hopperState=a,l=a)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return u};let Rn=!1;const tt=[],Js=e=>{const t=document.activeElement;if(t&&(/textarea|input/i.test(t.nodeName)||t.getAttribute("contenteditable")==="true")){let r=!1,s=t;for(;s!==document.body;){if(s.classList.contains("filepond--root")){r=!0;break}s=s.parentNode}if(!r)return}jn(e.clipboardData).then(r=>{r.length&&tt.forEach(s=>s(r))})},Vu=e=>{tt.includes(e)||(tt.push(e),!Rn&&(Rn=!0,document.addEventListener("paste",Js)))},Bu=e=>{Fn(tt,tt.indexOf(e)),tt.length===0&&(document.removeEventListener("paste",Js),Rn=!1)},$u=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Bu(e)},onload:()=>{}};return Vu(e),t},ku=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,W(e.element,"role","alert"),W(e.element,"aria-live","polite"),W(e.element,"aria-relevant","additions")};let Gr=null,Ur=null;const on=[],Ht=(e,t)=>{e.element.textContent=t},ju=e=>{e.element.textContent=""},ei=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Ht(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Ur),Ur=setTimeout(()=>{ju(e)},1500)},ti=e=>e.element.parentNode.contains(document.activeElement),qu=({root:e,action:t})=>{if(!ti(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);on.push(n.filename),clearTimeout(Gr),Gr=setTimeout(()=>{ei(e,on.join(", "),e.query("GET_LABEL_FILE_ADDED")),on.length=0},750)},zu=({root:e,action:t})=>{if(!ti(e))return;const n=t.item;ei(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Hu=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Ht(e,`${r} ${s}`)},Vr=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Ht(e,`${r} ${s}`)},St=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Ht(e,`${t.status.main} ${r} ${t.status.sub}`)},Wu=H({create:ku,ignoreRect:!0,ignoreRectUpdate:!0,write:te({DID_LOAD_ITEM:qu,DID_REMOVE_ITEM:zu,DID_COMPLETE_ITEM_PROCESSING:Hu,DID_ABORT_ITEM_PROCESSING:Vr,DID_REVERT_ITEM_PROCESSING:Vr,DID_THROW_ITEM_REMOVE_ERROR:St,DID_THROW_ITEM_LOAD_ERROR:St,DID_THROW_ITEM_INVALID:St,DID_THROW_ITEM_PROCESSING_ERROR:St}),tag:"span",name:"assistant"}),ni=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),ri=(e,t=16,n=!0)=>{let r=Date.now(),s=null;return(...o)=>{clearTimeout(s);const i=Date.now()-r,l=()=>{r=Date.now(),e(...o)};i<t?n||(s=setTimeout(l,t-i)):l()}},Yu=1e6,Nt=e=>e.preventDefault(),Xu=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(a=>a.length).forEach(a=>{e.element.classList.add(a)}),e.ref.label=e.appendChildView(e.createChildView(Kc,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Hc,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(ks,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Wu,{...t})),e.ref.data=e.appendChildView(e.createChildView(mu,{...t})),e.ref.measure=Oe("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(a=>!be(a.value)).map(({name:a,value:u})=>{e.element.dataset[a]=u}),e.ref.widthPrevious=null,e.ref.widthUpdated=ri(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!s&&(e.element.addEventListener("touchmove",Nt,{passive:!1}),e.element.addEventListener("gesturestart",Nt));const i=e.query("GET_CREDITS");if(i.length===2){const a=document.createElement("a");a.className="filepond--credits",a.href=i[0],a.tabIndex=-1,a.target="_blank",a.rel="noopener noreferrer nofollow",a.textContent=i[1],e.element.appendChild(a),e.ref.credits=a}},Zu=({root:e,props:t,actions:n})=>{if(td({root:e,props:t,actions:n}),n.filter(S=>/^DID_SET_STYLE_/.test(S.type)).filter(S=>!be(S.data.value)).map(({type:S,data:M})=>{const b=ni(S.substring(8).toLowerCase(),"_");e.element.dataset[b]=M.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Ju(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:o,list:i,panel:l}=e.ref;s&&s.updateHopperState();const a=e.query("GET_PANEL_ASPECT_RATIO"),u=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),d=u?e.query("GET_MAX_FILES")||Yu:1,h=c===d,m=n.find(S=>S.type==="DID_ADD_ITEM");if(h&&m){const S=m.data.interactionMethod;o.opacity=0,u?o.translateY=-40:S===fe.API?o.translateX=40:S===fe.BROWSE?o.translateY=40:o.translateY=30}else h||(o.opacity=1,o.translateX=0,o.translateY=0);const p=Qu(e),I=Ku(e),_=o.rect.element.height,E=!u||h?0:_,f=h?i.rect.element.marginTop:0,g=c===0?0:i.rect.element.marginBottom,R=E+f+I.visual+g,y=E+f+I.bounds+g;if(i.translateY=Math.max(0,E-i.rect.element.marginTop)-p.top,a){const S=e.rect.element.width,M=S*a;a!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=a,e.ref.updateHistory=[]);const b=e.ref.updateHistory;b.push(S);const w=2;if(b.length>w*2){const v=b.length,C=v-10;let V=0;for(let A=v;A>=C;A--)if(b[A]===b[A-2]&&V++,V>=w)return}l.scalable=!1,l.height=M;const L=M-E-(g-p.bottom)-(h?f:0);I.visual>L?i.overflow=L:i.overflow=null,e.height=M}else if(r.fixedHeight){l.scalable=!1;const S=r.fixedHeight-E-(g-p.bottom)-(h?f:0);I.visual>S?i.overflow=S:i.overflow=null}else if(r.cappedHeight){const S=R>=r.cappedHeight,M=Math.min(r.cappedHeight,R);l.scalable=!0,l.height=S?M:M-p.top-p.bottom;const b=M-E-(g-p.bottom)-(h?f:0);R>r.cappedHeight&&I.visual>b?i.overflow=b:i.overflow=null,e.height=Math.min(r.cappedHeight,y-p.top-p.bottom)}else{const S=c>0?p.top+p.bottom:0;l.scalable=!0,l.height=Math.max(_,R-S),e.height=Math.max(_,y-S)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},Qu=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Ku=e=>{let t=0,n=0;const r=e.ref.list,s=r.childViews[0],o=s.childViews.filter(f=>f.rect.element.height),i=e.query("GET_ACTIVE_ITEMS").map(f=>o.find(g=>g.id===f.id)).filter(f=>f);if(i.length===0)return{visual:t,bounds:n};const l=s.rect.element.width,a=$n(s,i,r.dragCoordinates),u=i[0].rect.element,c=u.marginTop+u.marginBottom,d=u.marginLeft+u.marginRight,h=u.width+d,m=u.height+c,p=typeof a<"u"&&a>=0?1:0,I=i.find(f=>f.markedForRemoval&&f.opacity<.45)?-1:0,_=i.length+p+I,E=Bn(l,h);return E===1?i.forEach(f=>{const g=f.rect.element.height+c;n+=g,t+=g*f.opacity}):(n=Math.ceil(_/E)*m,t=n),{visual:t,bounds:n}},Ju=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Hn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const i=t.length;return!r&&i>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:q("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:it(o)&&s+i>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:q("warning",0,"Max files")}),!0):!1)},ed=(e,t,n)=>{const r=e.childViews[0];return $n(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Br=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const s=Uu(e.element,o=>{const i=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(a=>He("ALLOW_HOPPER_ITEM",a,{query:e.query}).every(u=>u===!0)&&i(a)):!0},{filterItems:o=>{const i=e.query("GET_IGNORED_FILES");return o.filter(l=>Ue(l)?!i.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(o,i)=>{const a=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(c=>a.find(d=>d.id===c.id)).filter(c=>c);he("ADD_ITEMS",o,{dispatch:e.dispatch}).then(c=>{if(Hn(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:ed(e.ref.list,u,i),interactionMethod:fe.DROP})}),e.dispatch("DID_DROP",{position:i}),e.dispatch("DID_END_DRAG",{position:i})},s.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},s.ondrag=ri(o=>{e.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(ou))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},$r=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),s=n&&!r;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Zc,{...t,onload:o=>{he("ADD_ITEMS",o,{dispatch:e.dispatch}).then(i=>{if(Hn(e,i))return!1;e.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:fe.BROWSE})})}}),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},kr=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=$u(),e.ref.paster.onload=s=>{he("ADD_ITEMS",s,{dispatch:e.dispatch}).then(o=>{if(Hn(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:fe.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},td=te({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{$r(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Br(e)},DID_SET_ALLOW_PASTE:({root:e})=>{kr(e)},DID_SET_DISABLED:({root:e,props:t})=>{Br(e),kr(e),$r(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),nd=H({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Xu,write:Zu,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Nt),e.element.removeEventListener("gesturestart",Nt)},mixins:{styles:["height"]}}),rd=(e={})=>{let t=null;const n=Lt(),r=_a(sl(n),[Sl,al(n)],[Yl,ol(n)]);r.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,i=!1,l=!1,a=null,u=null;const c=()=>{i||(i=!0),clearTimeout(o),o=setTimeout(()=>{i=!1,a=null,u=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const d=nd(r,{id:Nn()});let h=!1,m=!1;const p={_read:()=>{i&&(u=window.innerWidth,a||(a=u),!l&&u!==a&&(r.dispatch("DID_START_RESIZE"),l=!0)),m&&h&&(h=d.element.offsetParent===null),!h&&(d._read(),m=d.rect.element.hidden)},_write:O=>{const x=r.processActionQueue().filter(P=>!/^SET_/.test(P.type));h&&!x.length||(f(x),h=d._write(O,x,l),ul(r.query("GET_ITEMS")),h&&r.processDispatchQueue())}},I=O=>x=>{const P={type:O};if(!x)return P;if(x.hasOwnProperty("error")&&(P.error=x.error?{...x.error}:null),x.status&&(P.status={...x.status}),x.file&&(P.output=x.file),x.source)P.file=x.source;else if(x.item||x.id){const F=x.item?x.item:r.query("GET_ITEM",x.id);P.file=F?se(F):null}return x.items&&(P.items=x.items.map(se)),/progress/.test(O)&&(P.progress=x.progress),x.hasOwnProperty("origin")&&x.hasOwnProperty("target")&&(P.origin=x.origin,P.target=x.target),P},_={DID_DESTROY:I("destroy"),DID_INIT:I("init"),DID_THROW_MAX_FILES:I("warning"),DID_INIT_ITEM:I("initfile"),DID_START_ITEM_LOAD:I("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:I("addfileprogress"),DID_LOAD_ITEM:I("addfile"),DID_THROW_ITEM_INVALID:[I("error"),I("addfile")],DID_THROW_ITEM_LOAD_ERROR:[I("error"),I("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[I("error"),I("removefile")],DID_PREPARE_OUTPUT:I("preparefile"),DID_START_ITEM_PROCESSING:I("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:I("processfileprogress"),DID_ABORT_ITEM_PROCESSING:I("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:I("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:I("processfiles"),DID_REVERT_ITEM_PROCESSING:I("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[I("error"),I("processfile")],DID_REMOVE_ITEM:I("removefile"),DID_UPDATE_ITEMS:I("updatefiles"),DID_ACTIVATE_ITEM:I("activatefile"),DID_REORDER_ITEMS:I("reorderfiles")},E=O=>{const x={pond:B,...O};delete x.type,d.element.dispatchEvent(new CustomEvent(`FilePond:${O.type}`,{detail:x,bubbles:!0,cancelable:!0,composed:!0}));const P=[];O.hasOwnProperty("error")&&P.push(O.error),O.hasOwnProperty("file")&&P.push(O.file);const F=["type","error","file"];Object.keys(O).filter(U=>!F.includes(U)).forEach(U=>P.push(O[U])),B.fire(O.type,...P);const k=r.query(`GET_ON${O.type.toUpperCase()}`);k&&k(...P)},f=O=>{O.length&&O.filter(x=>_[x.type]).forEach(x=>{const P=_[x.type];(Array.isArray(P)?P:[P]).forEach(F=>{x.type==="DID_INIT_ITEM"?E(F(x.data)):setTimeout(()=>{E(F(x.data))},0)})})},g=O=>r.dispatch("SET_OPTIONS",{options:O}),R=O=>r.query("GET_ACTIVE_ITEM",O),y=O=>new Promise((x,P)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:O,success:F=>{x(F)},failure:F=>{P(F)}})}),S=(O,x={})=>new Promise((P,F)=>{w([{source:O,options:x}],{index:x.index}).then(k=>P(k&&k[0])).catch(F)}),M=O=>O.file&&O.id,b=(O,x)=>(typeof O=="object"&&!M(O)&&!x&&(x=O,O=void 0),r.dispatch("REMOVE_ITEM",{...x,query:O}),r.query("GET_ACTIVE_ITEM",O)===null),w=(...O)=>new Promise((x,P)=>{const F=[],k={};if(Bt(O[0]))F.push.apply(F,O[0]),Object.assign(k,O[1]||{});else{const U=O[O.length-1];typeof U=="object"&&!(U instanceof Blob)&&Object.assign(k,O.pop()),F.push(...O)}r.dispatch("ADD_ITEMS",{items:F,index:k.index,interactionMethod:fe.API,success:x,failure:P})}),L=()=>r.query("GET_ACTIVE_ITEMS"),v=O=>new Promise((x,P)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:O,success:F=>{x(F)},failure:F=>{P(F)}})}),C=(...O)=>{const x=Array.isArray(O[0])?O[0]:O,P=x.length?x:L();return Promise.all(P.map(y))},V=(...O)=>{const x=Array.isArray(O[0])?O[0]:O;if(!x.length){const P=L().filter(F=>!(F.status===G.IDLE&&F.origin===Y.LOCAL)&&F.status!==G.PROCESSING&&F.status!==G.PROCESSING_COMPLETE&&F.status!==G.PROCESSING_REVERT_ERROR);return Promise.all(P.map(v))}return Promise.all(x.map(v))},A=(...O)=>{const x=Array.isArray(O[0])?O[0]:O;let P;typeof x[x.length-1]=="object"?P=x.pop():Array.isArray(O[0])&&(P=O[1]);const F=L();return x.length?x.map(U=>Me(U)?F[U]?F[U].id:null:U).filter(U=>U).map(U=>b(U,P)):Promise.all(F.map(U=>b(U,P)))},B={...jt(),...p,...il(r,n),setOptions:g,addFile:S,addFiles:w,getFile:R,processFile:v,prepareFile:y,removeFile:b,moveFile:(O,x)=>r.dispatch("MOVE_ITEM",{query:O,index:x}),getFiles:L,processFiles:V,removeFiles:A,prepareFiles:C,sort:O=>r.dispatch("SORT",{compare:O}),browse:()=>{var O=d.element.querySelector("input[type=file]");O&&O.click()},destroy:()=>{B.fire("destroy",d.element),r.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:O=>dr(d.element,O),insertAfter:O=>fr(d.element,O),appendTo:O=>O.appendChild(d.element),replaceElement:O=>{dr(d.element,O),O.parentNode.removeChild(O),t=O},restoreElement:()=>{t&&(fr(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:O=>d.element===O||t===O,element:{get:()=>d.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),we(B)},si=(e={})=>{const t={};return j(Lt(),(r,s)=>{t[r]=s[0]}),rd({...t,...e})},sd=e=>e.charAt(0).toLowerCase()+e.slice(1),id=e=>ni(e.replace(/^data-/,"")),ii=(e,t)=>{j(t,(n,r)=>{j(e,(s,o)=>{const i=new RegExp(n);if(!i.test(s)||(delete e[s],r===!1))return;if(J(r)){e[r]=o;return}const a=r.group;X(r)&&!e[a]&&(e[a]={}),e[a][sd(s.replace(i,""))]=o}),r.mapping&&ii(e[r.group],r.mapping)})},od=(e,t={})=>{const n=[];j(e.attributes,s=>{n.push(e.attributes[s])});const r=n.filter(s=>s.name).reduce((s,o)=>{const i=W(e,o.name);return s[id(o.name)]=i===o.name?!0:i,s},{});return ii(r,t),r},ad=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};He("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},s=od(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(s).forEach(i=>{X(s[i])?(X(r[i])||(r[i]={}),Object.assign(r[i],s[i])):r[i]=s[i]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(i=>({source:i.value,options:{type:i.dataset.type}})));const o=si(r);return e.files&&Array.from(e.files).forEach(i=>{o.addFile(i)}),o.replaceElement(e),o},ld=(...e)=>Ia(e[0])?ad(...e):si(...e),cd=["fire","_read","_write"],jr=e=>{const t={};return vs(e,t,cd),t},ud=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),dd=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(s,o)=>{},post:(s,o,i)=>{const l=Nn();r.onmessage=a=>{a.data.id===l&&o(a.data.message)},r.postMessage({id:l,message:s},i)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},fd=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),oi=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},pd=e=>oi(e,e.name),qr=[],hd=e=>{if(qr.includes(e))return;qr.push(e);const t=e({addFilter:fl,utils:{Type:D,forin:j,isString:J,isFile:Ue,toNaturalFileSize:Vs,replaceInString:ud,getExtensionFromFilename:qt,getFilenameWithoutExtension:Fs,guesstimateMimeType:Zs,getFileFromBlob:nt,getFilenameFromURL:ht,createRoute:te,createWorker:dd,createView:H,createItemAPI:se,loadImage:fd,copyFile:pd,renameFile:oi,createBlob:Ls,applyFilterChain:he,text:z,getNumericAspectRatioFromString:xs},views:{fileActionButton:Us}});pl(t.options)},md=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Ed=()=>"Promise"in window,gd=()=>"slice"in Blob.prototype,Id=()=>"URL"in window&&"createObjectURL"in window.URL,_d=()=>"visibilityState"in document,Td=()=>"performance"in window,yd=()=>"supports"in(window.CSS||{}),Rd=()=>/MSIE|Trident/.test(window.navigator.userAgent),Sn=(()=>{const e=ys()&&!md()&&_d()&&Ed()&&gd()&&Id()&&Td()&&(yd()||Rd());return()=>e})(),De={apps:[]},Sd="filepond",We=()=>{};let zr={},wt=We,an=We,Hr=We,Wr=We,bn=We,Yr=We,Xr=We;if(Sn()){qa(()=>{De.apps.forEach(n=>n._read())},n=>{De.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Sn,create:wt,destroy:an,parse:Hr,find:Wr,registerPlugin:bn,setOptions:Xr}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>j(Lt(),(n,r)=>{zr[n]=r[1]});zr={},t(),wt=(...n)=>{const r=ld(...n);return r.on("destroy",an),De.apps.push(r),jr(r)},an=n=>{const r=De.apps.findIndex(s=>s.isAttachedTo(n));return r>=0?(De.apps.splice(r,1)[0].restoreElement(),!0):!1},Hr=n=>Array.from(n.querySelectorAll(`.${Sd}`)).filter(o=>!De.apps.find(i=>i.isAttachedTo(o))).map(o=>wt(o)),Wr=n=>{const r=De.apps.find(s=>s.isAttachedTo(n));return r?jr(r):null},bn=(...n)=>{n.forEach(hd),t()},Yr=()=>{const n={};return j(Lt(),(r,s)=>{n[r]=s[0]}),n},Xr=n=>(X(n)&&(De.apps.forEach(r=>{r.setOptions(n)}),hl(n)),Yr())}/*!
 * react-filepond v7.1.3
 * A handy FilePond adapter component for React
 * 
 * Copyright (c) 2024 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const bd=Sn(),Od=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];class Zr extends Si.Component{constructor(t){super(t),this.allowFilesSync=!0}componentDidMount(){if(this._input=this._element.querySelector('input[type="file"]'),this._inputClone=this._input.cloneNode(),!bd)return;const t=Object.assign({},this.props);if(t.onupdatefiles){const n=t.onupdatefiles;t.onupdatefiles=r=>{this.allowFilesSync=!1,n(r)}}this._pond=wt(this._input,t),Object.keys(this._pond).filter(n=>!Od.includes(n)).forEach(n=>{this[n]=this._pond[n]})}componentWillUnmount(){if(!this._pond)return;const t=document.createElement("div");t.append(this._pond.element),t.id="foo",this._pond.destroy(),this._pond=void 0,this._element.append(this._inputClone)}shouldComponentUpdate(){return this.allowFilesSync?!0:(this.allowFilesSync=!0,!1)}componentDidUpdate(){if(!this._pond)return;const t=Object.assign({},this.props);delete t.onupdatefiles,this._pond.setOptions(t)}render(){const{id:t,name:n,className:r,allowMultiple:s,required:o,captureMethod:i,acceptedFileTypes:l}=this.props;return N.createElement("div",{className:"filepond--wrapper",ref:a=>this._element=a},N.createElement("input",{type:"file",name:n,id:t,accept:l,multiple:s,required:o,className:r,capture:i}))}}/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Dd=e=>/^image/.test(e.type),Qr=(e,t)=>ft(e.x*t,e.y*t),Kr=(e,t)=>ft(e.x+t.x,e.y+t.y),vd=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ft(e.x/t,e.y/t)},bt=(e,t,n)=>{const r=Math.cos(t),s=Math.sin(t),o=ft(e.x-n.x,e.y-n.y);return ft(n.x+r*o.x-s*o.y,n.y+s*o.x+r*o.y)},ft=(e=0,t=0)=>({x:e,y:t}),ie=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},Ad=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",s=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",i=ie(e.borderWidth||e.lineWidth,t,n),l=e.lineCap||"round",a=e.lineJoin||"round",u=typeof r=="string"?"":r.map(d=>ie(d,t,n)).join(","),c=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":a,"stroke-width":i||0,"stroke-dasharray":u,stroke:o,fill:s,opacity:c}},de=e=>e!=null,wd=(e,t,n=1)=>{let r=ie(e.x,t,n,"width")||ie(e.left,t,n,"width"),s=ie(e.y,t,n,"height")||ie(e.top,t,n,"height"),o=ie(e.width,t,n,"width"),i=ie(e.height,t,n,"height"),l=ie(e.right,t,n,"width"),a=ie(e.bottom,t,n,"height");return de(s)||(de(i)&&de(a)?s=t.height-i-a:s=a),de(r)||(de(o)&&de(l)?r=t.width-o-l:r=l),de(o)||(de(r)&&de(l)?o=t.width-r-l:o=0),de(i)||(de(s)&&de(a)?i=t.height-s-a:i=0),{x:r||0,y:s||0,width:o||0,height:i||0}},xd=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),_e=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),Cd="http://www.w3.org/2000/svg",et=(e,t)=>{const n=document.createElementNS(Cd,e);return t&&_e(n,t),n},Md=e=>_e(e,{...e.rect,...e.styles}),Ld=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,s=e.rect.height*.5;return _e(e,{cx:t,cy:n,rx:r,ry:s,...e.styles})},Pd={contain:"xMidYMid meet",cover:"xMidYMid slice"},Nd=(e,t)=>{_e(e,{...e.rect,...e.styles,preserveAspectRatio:Pd[t.fit]||"none"})},Fd={left:"start",center:"middle",right:"end"},Gd=(e,t,n,r)=>{const s=ie(t.fontSize,n,r),o=t.fontFamily||"sans-serif",i=t.fontWeight||"normal",l=Fd[t.textAlign]||"start";_e(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":i,"font-size":s,"font-family":o,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Ud=(e,t,n,r)=>{_e(e,{...e.rect,...e.styles,fill:"none"});const s=e.childNodes[0],o=e.childNodes[1],i=e.childNodes[2],l=e.rect,a={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(_e(s,{x1:l.x,y1:l.y,x2:a.x,y2:a.y}),!t.lineDecoration)return;o.style.display="none",i.style.display="none";const u=vd({x:a.x-l.x,y:a.y-l.y}),c=ie(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const d=Qr(u,c),h=Kr(l,d),m=bt(l,2,h),p=bt(l,-2,h);_e(o,{style:"display:block;",d:`M${m.x},${m.y} L${l.x},${l.y} L${p.x},${p.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const d=Qr(u,-c),h=Kr(a,d),m=bt(a,2,h),p=bt(a,-2,h);_e(i,{style:"display:block;",d:`M${m.x},${m.y} L${a.x},${a.y} L${p.x},${p.y}`})}},Vd=(e,t,n,r)=>{_e(e,{...e.styles,fill:"none",d:xd(t.points.map(s=>({x:ie(s.x,n,r,"width"),y:ie(s.y,n,r,"height")})))})},Ot=e=>t=>et(e,{id:t.id}),Bd=e=>{const t=et("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},$d=e=>{const t=et("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=et("line");t.appendChild(n);const r=et("path");t.appendChild(r);const s=et("path");return t.appendChild(s),t},kd={image:Bd,rect:Ot("rect"),ellipse:Ot("ellipse"),text:Ot("text"),path:Ot("path"),line:$d},jd={rect:Md,ellipse:Ld,image:Nd,text:Gd,path:Vd,line:Ud},qd=(e,t)=>kd[e](t),zd=(e,t,n,r,s)=>{t!=="path"&&(e.rect=wd(n,r,s)),e.styles=Ad(n,r,s),jd[t](e,n,r,s)},Hd=["x","y","left","top","right","bottom","width","height"],Wd=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Yd=e=>{const[t,n]=e,r=n.points?{}:Hd.reduce((s,o)=>(s[o]=Wd(n[o]),s),{});return[t,{zIndex:0,...n,...r}]},Xd=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Zd=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:s,markup:o}=n,i=n.width,l=n.height;let a=r.width,u=r.height;if(s){const{size:m}=s;let p=m&&m.width,I=m&&m.height;const _=s.mode,E=s.upscale;p&&!I&&(I=p),I&&!p&&(p=I);const f=a<p&&u<I;if(!f||f&&E){let g=p/a,R=I/u;if(_==="force")a=p,u=I;else{let y;_==="cover"?y=Math.max(g,R):_==="contain"&&(y=Math.min(g,R)),a=a*y,u=u*y}}}const c={width:i,height:l};t.element.setAttribute("width",c.width),t.element.setAttribute("height",c.height);const d=Math.min(i/a,l/u);t.element.innerHTML="";const h=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(h).map(Yd).sort(Xd).forEach(m=>{const[p,I]=m,_=qd(p,I);zd(_,p,I,c,d),t.element.appendChild(_)})}}),dt=(e,t)=>({x:e,y:t}),Qd=(e,t)=>e.x*t.x+e.y*t.y,Jr=(e,t)=>dt(e.x-t.x,e.y-t.y),Kd=(e,t)=>Qd(Jr(e,t),Jr(e,t)),es=(e,t)=>Math.sqrt(Kd(e,t)),ts=(e,t)=>{const n=e,r=1.5707963267948966,s=t,o=1.5707963267948966-t,i=Math.sin(r),l=Math.sin(s),a=Math.sin(o),u=Math.cos(o),c=n/i,d=c*l,h=c*a;return dt(u*d,u*h)},Jd=(e,t)=>{const n=e.width,r=e.height,s=ts(n,t),o=ts(r,t),i=dt(e.x+Math.abs(s.x),e.y-Math.abs(s.y)),l=dt(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),a=dt(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:es(i,l),height:es(i,a)}},ef=(e,t,n=1)=>{const r=e.height/e.width;let s=1,o=t,i=1,l=r;l>o&&(l=o,i=l/r);const a=Math.max(s/i,o/l),u=e.width/(n*a*i),c=u*t;return{width:u,height:c}},ai=(e,t,n,r)=>{const s=r.x>.5?1-r.x:r.x,o=r.y>.5?1-r.y:r.y,i=s*2*e.width,l=o*2*e.height,a=Jd(t,n);return Math.max(a.width/i,a.height/l)},li=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const s=(e.width-n)*.5,o=(e.height-r)*.5;return{x:s,y:o,width:n,height:r}},tf=(e,t={})=>{let{zoom:n,rotation:r,center:s,aspectRatio:o}=t;o||(o=e.height/e.width);const i=ef(e,o,n),l={width:i.width,height:i.height},a=typeof t.scaleToFit>"u"||t.scaleToFit,u=ai(e,li(l,o),r,a?s:{x:.5,y:.5}),c=n*u;return{widthFloat:i.width/c,heightFloat:i.height/c,width:Math.round(i.width/c),height:Math.round(i.height/c)}},Ie={type:"spring",stiffness:.5,damping:.45,mass:10},nf=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),rf=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Ie,originY:Ie,scaleX:Ie,scaleY:Ie,translateX:Ie,translateY:Ie,rotateZ:Ie}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(nf(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:s}=t.ref;s.scaleX=r.horizontal?-1:1,s.scaleY=r.vertical?-1:1}}),sf=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(rf(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Zd(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:s,markup:o,resize:i,dirty:l,width:a,height:u}=n;t.ref.image.crop=s;const c={width:a,height:u,center:{x:a*.5,y:u*.5}},d={width:t.ref.image.width,height:t.ref.image.height},h={x:s.center.x*d.width,y:s.center.y*d.height},m={x:c.center.x-d.width*s.center.x,y:c.center.y-d.height*s.center.y},p=Math.PI*2+s.rotation%(Math.PI*2),I=s.aspectRatio||d.height/d.width,_=typeof s.scaleToFit>"u"||s.scaleToFit,E=ai(d,li(c,I),p,_?s.center:{x:.5,y:.5}),f=s.zoom*E;o&&o.length?(t.ref.createMarkup(),t.ref.markup.width=a,t.ref.markup.height=u,t.ref.markup.resize=i,t.ref.markup.dirty=l,t.ref.markup.markup=o,t.ref.markup.crop=tf(d,s)):t.ref.markup&&t.ref.destroyMarkup();const g=t.ref.image;if(r){g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,g.scaleY=null;return}g.originX=h.x,g.originY=h.y,g.translateX=m.x,g.translateY=m.y,g.rotateZ=p,g.scaleX=f,g.scaleY=f}}),of=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Ie,scaleY:Ie,translateY:Ie,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(sf(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:s}=t.ref,{image:o,crop:i,markup:l,resize:a,dirty:u}=n;if(s.crop=i,s.markup=l,s.resize=a,s.dirty=u,s.opacity=r?0:1,r||t.rect.element.hidden)return;const c=o.height/o.width;let d=i.aspectRatio||c;const h=t.rect.inner.width,m=t.rect.inner.height;let p=t.query("GET_IMAGE_PREVIEW_HEIGHT");const I=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),_=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),E=t.query("GET_PANEL_ASPECT_RATIO"),f=t.query("GET_ALLOW_MULTIPLE");E&&!f&&(p=h*E,d=E);let g=p!==null?p:Math.max(I,Math.min(h*d,_)),R=g/d;R>h&&(R=h,g=R*d),g>m&&(g=m,R=m/d),s.width=R,s.height=g}});let af=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,ns=0;const lf=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=af;if(document.querySelector("base")){const s=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+s+"#")}ns++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,ns)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),cf=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},uf=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,s=r.length,o=n[0],i=n[1],l=n[2],a=n[3],u=n[4],c=n[5],d=n[6],h=n[7],m=n[8],p=n[9],I=n[10],_=n[11],E=n[12],f=n[13],g=n[14],R=n[15],y=n[16],S=n[17],M=n[18],b=n[19];let w=0,L=0,v=0,C=0,V=0;for(;w<s;w+=4)L=r[w]/255,v=r[w+1]/255,C=r[w+2]/255,V=r[w+3]/255,r[w]=Math.max(0,Math.min((L*o+v*i+C*l+V*a+u)*255,255)),r[w+1]=Math.max(0,Math.min((L*c+v*d+C*h+V*m+p)*255,255)),r[w+2]=Math.max(0,Math.min((L*I+v*_+C*E+V*f+g)*255,255)),r[w+3]=Math.max(0,Math.min((L*R+v*y+C*S+V*M+b)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},df=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,s=n.naturalHeight;n=null,t(r,s)},n.src=e},ff={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},pf=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,ff[r](t,n))},hf=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const s=document.createElement("canvas");s.width=t,s.height=n;const o=s.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),pf(o,t,n,r),o.drawImage(e,0,0,t,n),s},ci=e=>/^image/.test(e.type)&&!/svg/.test(e.type),mf=10,Ef=10,gf=e=>{const t=Math.min(mf/e.width,Ef/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),s=n.width=Math.ceil(e.width*t),o=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,s,o);let i=null;try{i=r.getImageData(0,0,s,o).data}catch{return null}const l=i.length;let a=0,u=0,c=0,d=0;for(;d<l;d+=4)a+=i[d]*i[d],u+=i[d+1]*i[d+1],c+=i[d+2]*i[d+2];return a=ln(a,l),u=ln(u,l),c=ln(c,l),{r:a,g:u,b:c}},ln=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),If=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),_f=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},Tf=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),yf=e=>{const t=lf(e),n=of(e),{createWorker:r}=e.utils,s=(f,g,R)=>new Promise(y=>{f.ref.imageData||(f.ref.imageData=R.getContext("2d").getImageData(0,0,R.width,R.height));const S=_f(f.ref.imageData);if(!g||g.length!==20)return R.getContext("2d").putImageData(S,0,0),y();const M=r(uf);M.post({imageData:S,colorMatrix:g},b=>{R.getContext("2d").putImageData(b,0,0),M.terminate(),y()},[S.data.buffer])}),o=(f,g)=>{f.removeChildView(g),g.image.width=1,g.image.height=1,g._destroy()},i=({root:f})=>{const g=f.ref.images.shift();return g.opacity=0,g.translateY=-15,f.ref.imageViewBin.push(g),g},l=({root:f,props:g,image:R})=>{const y=g.id,S=f.query("GET_ITEM",{id:y});if(!S)return;const M=S.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},b=f.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let w,L,v=!1;f.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(w=S.getMetadata("markup")||[],L=S.getMetadata("resize"),v=!0);const C=f.appendChildView(f.createChildView(n,{id:y,image:R,crop:M,resize:L,markup:w,dirty:v,background:b,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),f.childViews.length);f.ref.images.push(C),C.opacity=1,C.scaleX=1,C.scaleY=1,C.translateY=0,setTimeout(()=>{f.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:y})},250)},a=({root:f,props:g})=>{const R=f.query("GET_ITEM",{id:g.id});if(!R)return;const y=f.ref.images[f.ref.images.length-1];y.crop=R.getMetadata("crop"),y.background=f.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),f.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(y.dirty=!0,y.resize=R.getMetadata("resize"),y.markup=R.getMetadata("markup"))},u=({root:f,props:g,action:R})=>{if(!/crop|filter|markup|resize/.test(R.change.key)||!f.ref.images.length)return;const y=f.query("GET_ITEM",{id:g.id});if(y){if(/filter/.test(R.change.key)){const S=f.ref.images[f.ref.images.length-1];s(f,R.change.value,S.image);return}if(/crop|markup|resize/.test(R.change.key)){const S=y.getMetadata("crop"),M=f.ref.images[f.ref.images.length-1];if(S&&S.aspectRatio&&M.crop&&M.crop.aspectRatio&&Math.abs(S.aspectRatio-M.crop.aspectRatio)>1e-5){const b=i({root:f});l({root:f,props:g,image:If(b.image)})}else a({root:f,props:g})}}},c=f=>{const R=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),y=R?parseInt(R[1]):null;return y!==null&&y<=58?!1:"createImageBitmap"in window&&ci(f)},d=({root:f,props:g})=>{const{id:R}=g,y=f.query("GET_ITEM",R);if(!y)return;const S=URL.createObjectURL(y.file);df(S,(M,b)=>{f.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:R,width:M,height:b})})},h=({root:f,props:g})=>{const{id:R}=g,y=f.query("GET_ITEM",R);if(!y)return;const S=URL.createObjectURL(y.file),M=()=>{Tf(S).then(b)},b=w=>{URL.revokeObjectURL(S);const v=(y.getMetadata("exif")||{}).orientation||-1;let{width:C,height:V}=w;if(!C||!V)return;v>=5&&v<=8&&([C,V]=[V,C]);const A=Math.max(1,window.devicePixelRatio*.75),O=f.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*A,x=V/C,P=f.rect.element.width,F=f.rect.element.height;let k=P,U=k*x;x>1?(k=Math.min(C,P*O),U=k*x):(U=Math.min(V,F*O),k=U/x);const xe=hf(w,k,U,v),ot=()=>{const Wt=f.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?gf(data):null;y.setMetadata("color",Wt,!0),"close"in w&&w.close(),f.ref.overlayShadow.opacity=1,l({root:f,props:g,image:xe})},pe=y.getMetadata("filter");pe?s(f,pe,xe).then(ot):ot()};if(c(y.file)){const w=r(cf);w.post({file:y.file},L=>{if(w.terminate(),!L){M();return}b(L)})}else M()},m=({root:f})=>{const g=f.ref.images[f.ref.images.length-1];g.translateY=0,g.scaleX=1,g.scaleY=1,g.opacity=1},p=({root:f})=>{f.ref.overlayShadow.opacity=1,f.ref.overlayError.opacity=0,f.ref.overlaySuccess.opacity=0},I=({root:f})=>{f.ref.overlayShadow.opacity=.25,f.ref.overlayError.opacity=1},_=({root:f})=>{f.ref.overlayShadow.opacity=.25,f.ref.overlaySuccess.opacity=1},E=({root:f})=>{f.ref.images=[],f.ref.imageData=null,f.ref.imageViewBin=[],f.ref.overlayShadow=f.appendChildView(f.createChildView(t,{opacity:0,status:"idle"})),f.ref.overlaySuccess=f.appendChildView(f.createChildView(t,{opacity:0,status:"success"})),f.ref.overlayError=f.appendChildView(f.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:E,styles:["height"],apis:["height"],destroy:({root:f})=>{f.ref.images.forEach(g=>{g.image.width=1,g.image.height=1})},didWriteView:({root:f})=>{f.ref.images.forEach(g=>{g.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:m,DID_IMAGE_PREVIEW_CONTAINER_CREATE:d,DID_FINISH_CALCULATE_PREVIEWSIZE:h,DID_UPDATE_ITEM_METADATA:u,DID_THROW_ITEM_LOAD_ERROR:I,DID_THROW_ITEM_PROCESSING_ERROR:I,DID_THROW_ITEM_INVALID:I,DID_COMPLETE_ITEM_PROCESSING:_,DID_START_ITEM_PROCESSING:p,DID_REVERT_ITEM_PROCESSING:p},({root:f})=>{const g=f.ref.imageViewBin.filter(R=>R.opacity===0);f.ref.imageViewBin=f.ref.imageViewBin.filter(R=>R.opacity>0),g.forEach(R=>o(f,R)),g.length=0})})},ui=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:s,isFile:o}=n,i=yf(e);return t("CREATE_VIEW",l=>{const{is:a,view:u,query:c}=l;if(!a("file")||!c("GET_ALLOW_IMAGE_PREVIEW"))return;const d=({root:_,props:E})=>{const{id:f}=E,g=c("GET_ITEM",f);if(!g||!o(g.file)||g.archived)return;const R=g.file;if(!Dd(R)||!c("GET_IMAGE_PREVIEW_FILTER_ITEM")(g))return;const y="createImageBitmap"in(window||{}),S=c("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!y&&S&&R.size>S)return;_.ref.imagePreview=u.appendChildView(u.createChildView(i,{id:f}));const M=_.query("GET_IMAGE_PREVIEW_HEIGHT");M&&_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:g.id,height:M});const b=!y&&R.size>c("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");_.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:f},b)},h=(_,E)=>{if(!_.ref.imagePreview)return;let{id:f}=E;const g=_.query("GET_ITEM",{id:f});if(!g)return;const R=_.query("GET_PANEL_ASPECT_RATIO"),y=_.query("GET_ITEM_PANEL_ASPECT_RATIO"),S=_.query("GET_IMAGE_PREVIEW_HEIGHT");if(R||y||S)return;let{imageWidth:M,imageHeight:b}=_.ref;if(!M||!b)return;const w=_.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),L=_.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=(g.getMetadata("exif")||{}).orientation||-1;if(C>=5&&C<=8&&([M,b]=[b,M]),!ci(g.file)||_.query("GET_IMAGE_PREVIEW_UPSCALE")){const P=2048/M;M*=P,b*=P}const V=b/M,A=(g.getMetadata("crop")||{}).aspectRatio||V;let B=Math.max(w,Math.min(b,L));const O=_.rect.element.width,x=Math.min(O*A,B);_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:g.id,height:x})},m=({root:_})=>{_.ref.shouldRescale=!0},p=({root:_,action:E})=>{E.change.key==="crop"&&(_.ref.shouldRescale=!0)},I=({root:_,action:E})=>{_.ref.imageWidth=E.width,_.ref.imageHeight=E.height,_.ref.shouldRescale=!0,_.ref.shouldDrawPreview=!0,_.dispatch("KICK")};u.registerWriter(s({DID_RESIZE_ROOT:m,DID_STOP_RESIZE:m,DID_LOAD_ITEM:d,DID_IMAGE_PREVIEW_CALCULATE_SIZE:I,DID_UPDATE_ITEM_METADATA:p},({root:_,props:E})=>{_.ref.imagePreview&&(_.rect.element.hidden||(_.ref.shouldRescale&&(h(_,E),_.ref.shouldRescale=!1),_.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:E.id})})}),_.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},Rf=typeof window<"u"&&typeof window.document<"u";Rf&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ui}));bn(ui);const Sf=()=>{var l;const[e,t]=N.useState([]),{control:n,handleSubmit:r,formState:{errors:s}}=Ft(),{nextStep:o}=st();console.log(s);const i=r(a=>{console.log(a),o()});return T.jsxs(T.Fragment,{children:[T.jsxs(Q,{component:"form",children:[T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"55%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsx(Vt,{color:"#673ab7",children:"Sube los documentos requeridos para completar la inscripción del niño o niña. Asegúrate de adjuntar archivos legibles y en formato PDF o imagen. Este paso es obligatorio para continuar con el proceso."})}),T.jsxs(Q,{children:[T.jsx("label",{children:"DNI Niño"}),T.jsx(Xn,{control:n,name:"dni",render:({field:a})=>{var u;return T.jsx(Zr,{files:a.value||[],onupdatefiles:c=>a.onChange(c),allowMultiple:!1,maxFileSize:"5MB",acceptedFileTypes:["image/*","application/pdf"],labelIdle:'Arrastra y suelta tus archivos o <span class="filepond--label-action">haz clic aquí</span>',name:"files",credits:!1,onerror:(u=s.dni)==null?void 0:u.message})}}),s.dni&&T.jsx("p",{style:{color:"red"},children:s.dni.message})]}),T.jsxs(Q,{children:[T.jsx("label",{children:"Certificado de vacunacion"}),T.jsx(Xn,{control:n,name:"certVac",render:({field:a})=>T.jsx(Zr,{files:a.value||[],onupdatefiles:u=>a.onChange(u),allowMultiple:!1,maxFileSize:"5MB",acceptedFileTypes:["image/*","application/pdf"],labelIdle:'Arrastra y suelta tus archivos o <span class="filepond--label-action">haz clic aquí</span>',name:"files",credits:!1})}),(s==null?void 0:s.certVac)&&T.jsx("p",{style:{color:"red"},children:(l=s.certVac)==null?void 0:l.message})]})]}),T.jsx(Ut,{handleSubmit:i})]})},bf=()=>{const e=Ft({mode:"onTouched"}),{childId:t,parentId:n}=Ln(),{nextStep:r}=st(),s=e.handleSubmit(c=>{console.log(c),i.mutate({childId:t,attendantId:n,courseId:c==null?void 0:c.nameCourse,statusEnrollment:"Pendiente"}),r()}),{data:o}=bi({queryKey:["fetchAllCoursesActive"],queryFn:Ui}),i=On({mutationFn:Oi,onSuccess:()=>{Dn.success("Datos guardados exitosamente")}}),l=o==null?void 0:o.map(c=>({label:`${c.nameCourse} - Jornada (${c.shift})`,value:c==null?void 0:c.id})),a=o==null?void 0:o.find(c=>c.id===e.watch("nameCourse"));return N.useEffect(()=>{var c,d;a&&(e.setValue("shift",a.shift),e.setValue("maxCapacity",a.maxCapacity),e.setValue("minAgeMonths",a.minAgeMonths),e.setValue("maxAgeMonths",a.maxAgeMonths),e.setValue("mainTeacherId",`${((c=a.mainTeacher)==null?void 0:c.firstName)||""} ${((d=a.mainTeacher)==null?void 0:d.lastName)||""}`))},[a,e]),{courseForm:[{name:"nameCourse",label:"Nombre del curso",type:"select",options:l,size:1},{name:"shift",label:"Jornada",type:"select",options:[{label:"Mañana",value:"Morning"},{label:"Tarde",value:"Afternoon"},{label:"Todo el día",value:"FullDay"}],size:.5,disable:!0},{name:"maxCapacity",label:"Capacidad máxima",type:"number",size:.5,disable:!0},{name:"minAgeMonths",label:"Edad mínima (meses)",type:"number",size:.5,disable:!0},{name:"maxAgeMonths",label:"Edad máxima (meses)",type:"number",size:.5,disable:!0},{name:"mainTeacherId",label:"Docente principal (ID)",type:"text",size:1,disable:!0}],handleCourseSubmit:s,methods:e}},Of=()=>{const{courseForm:e,handleCourseSubmit:t,methods:n}=bf();return T.jsx(T.Fragment,{children:T.jsxs(vn,{...n,children:[T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"55%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsxs(Vt,{color:"#673ab7",bgNote:"#f3f3f3",children:["Completa los datos del curso para organizar mejor la oferta académica. Es importante definir edades, capacidad y jornada para garantizar un entorno adecuado para los niños."," "]})}),T.jsx(Q,{sx:{display:"flex",width:{xs:"100%",sm:"50%"},margin:"0 auto",gap:4,background:"#FFF"},children:T.jsx(An,{formItems:e})}),T.jsx(Ut,{handleSubmit:t})]})})},Df=()=>T.jsx(T.Fragment,{children:T.jsxs(So,{header:T.jsx(vo,{}),children:[T.jsx(ha,{}),T.jsx(Of,{}),T.jsx(ga,{}),T.jsx(Sf,{})]})}),vf=qe(T.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");function Af(){return T.jsxs("svg",{width:"200",viewBox:"0 0 600 150",xmlns:"http://www.w3.org/2000/svg",children:[T.jsxs("g",{transform:"translate(30,40)",children:[T.jsx("circle",{cx:"30",cy:"30",r:"26",fill:"#ffffff"}),T.jsx("circle",{cx:"10",cy:"4",r:"6",fill:"#ffffff"}),T.jsx("circle",{cx:"20",cy:"-4",r:"7",fill:"#ffffff"}),T.jsx("circle",{cx:"30",cy:"-4",r:"7",fill:"#ffffff"}),T.jsx("circle",{cx:"40",cy:"0",r:"6",fill:"#ffffff"})]}),T.jsx("text",{x:"120",y:"70",fontFamily:"'Comic Sans MS', cursive",fontSize:"42",fill:"#ffffff",fontWeight:"bold",children:"Pequeños Pasos"}),T.jsx("text",{x:"122",y:"105",fontFamily:"'Comic Sans MS', cursive",fontSize:"20",fill:"#ffffff",children:"Centro de cuidado infantil"})]})}const wf=240,rs=["Administradores"];function di(e){const{window:t}=e,[n,r]=N.useState(!1),s=os(),o=()=>{r(a=>!a)},i=T.jsxs(Q,{onClick:o,sx:{textAlign:"center"},children:[T.jsx(Ci,{}),T.jsx(Mi,{}),T.jsx(Li,{children:rs.map(a=>T.jsx(Wi,{disablePadding:!0,children:T.jsx(Pi,{sx:{textAlign:"center"},onClick:()=>s("/"),children:T.jsx(Ni,{primary:a})})},a))})]}),l=t!==void 0?()=>t().document.body:void 0;return T.jsxs(Q,{sx:{display:"flex"},children:[T.jsx(Di,{}),T.jsx(vi,{component:"nav",position:"static",color:"secondary",children:T.jsxs(Ai,{children:[T.jsx(wi,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:o,sx:{mr:2,display:{sm:"none"}},children:T.jsx(vf,{})}),T.jsx(Af,{}),T.jsx(Q,{sx:{display:{xs:"none",sm:"block"}},children:rs.map(a=>T.jsx(un,{sx:{color:"#fff"},onClick:()=>s("/"),children:a},a))})]})}),T.jsx("nav",{children:T.jsx(xi,{container:l,variant:"temporary",open:n,onClose:o,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:wf}},children:i})})]})}di.propTypes={window:Fi.func};const Lf=()=>T.jsxs(T.Fragment,{children:[T.jsx(di,{}),T.jsx(Gi,{children:T.jsx(Q,{sx:{width:{xs:"100%",sm:"80%"},margin:"0 auto"},children:T.jsx(da,{children:T.jsx(Df,{})})})})]});export{Lf as default};
