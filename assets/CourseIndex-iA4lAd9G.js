import{a as u,ag as d,b as h,y as f,a4 as c,j as a,a1 as C,e as b,g as p,V as x,M as y,ah as g}from"./index-DoAxHfkR.js";import{G as N}from"./GlobalModal-CXmofvdx.js";import{p as A,a as v}from"./course-Dt0OYzYm.js";import{g as F}from"./professor-BEvcontm.js";import{G as j}from"./GlobalForm-C-E8Glxm.js";const M=()=>{var i;const s=u(),e=d(),o=s.handleSubmit(t=>{console.log(t),r.mutate(t)}),r=h({mutationFn:A,onSuccess:()=>{e.invalidateQueries(["fetchAllCourse"]),f.success("Se guardo correctamente el registro")}}),{data:l}=c({queryKey:["fetchAllProfessor"],queryFn:F}),n=(i=l==null?void 0:l.content)==null?void 0:i.map(t=>({label:`${t.firstName} ${t.lastName}`,value:t.documentId})),m=[{name:"nameCourse",label:"Nombre del curso",type:"text",size:1},{name:"minAgeMonths",label:"Edad mínima (en meses)",type:"number",size:.5},{name:"maxAgeMonths",label:"Edad máxima (en meses)",type:"number",size:.5},{name:"maxCapacity",label:"Capacidad máxima",type:"number",size:.5},{name:"shift",label:"Turno",type:"select",options:[{label:"Mañana",value:"Morning"},{label:"Tarde",value:"Afternoon"},{label:"Completo",value:"FullDay"}],size:.5},{name:"mainTeacherId",label:"Profesor principal",type:"select",options:n,size:1},{name:"location",label:"Ubicación del aula",type:"text",size:1}];return console.log(n),{courseForm:m,methods:s,handleSubmitCreateCourse:o,fetchCourseSave:r}},S=()=>{const{courseForm:s,methods:e,handleSubmitCreateCourse:o,fetchCourseSave:{isSuccess:r}}=M();return a.jsx(a.Fragment,{children:a.jsx(C,{...e,children:a.jsx(N,{buttonTitle:"Crear Aula",buttonColor:"secondary",buttonBackground:"secondary",modalTitle:"Crear Sala (Aula)",actionTitleButton:"Guardar",handleOnClick:o,closeModal:r,children:a.jsx(j,{formItems:s})})})})},T=()=>({fetchAllCourses:c({queryKey:["fetchAllCourse"],queryFn:v})}),w=()=>{const s=b();return{courseColumns:[{field:"id",headerName:"ID",width:70},{field:"nameCourse",headerName:"Nombre del curso",flex:1},{field:"minAgeMonths",headerName:"Edad mínima (meses)",flex:.5},{field:"maxAgeMonths",headerName:"Edad máxima (meses)",flex:.5},{field:"maxCapacity",headerName:"Capacidad máxima",flex:.5},{field:"shift",headerName:"Turno",flex:.5},{field:"location",headerName:"Ubicación",flex:1},{field:"mainTeacher",headerName:"Profesor",width:200,renderCell:o=>{const r=o.formattedValue;return r?`${r.firstName} ${r.lastName}`:"Sin asignar"}},{field:"active",headerName:"Activo",width:100,type:"boolean"},{field:"option",headerName:"Gestionar",width:100,sortable:!1,filterable:!1,renderCell:o=>a.jsx(p,{onClick:()=>s(`/course/${o.row.id}/students`),color:"secondary","aria-label":"ver inscripción",children:a.jsx(x,{color:"secondary"})})}]}},P=()=>{const{courseColumns:s}=w(),{fetchAllCourses:{data:e,isFetching:o}}=T();return console.log(e),a.jsx(a.Fragment,{children:a.jsxs(y,{title:"Cursos",children:[a.jsx(S,{}),a.jsx(g,{rowCount:e==null?void 0:e.totalElements,isLoading:o,colums:s,rows:e==null?void 0:e.content,getRowId:"id"})]})})};export{P as default};
